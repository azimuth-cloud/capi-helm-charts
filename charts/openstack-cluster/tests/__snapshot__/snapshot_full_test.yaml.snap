templated manifests should match snapshot:
  1: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: cert-manager
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-cert-manager-config
    stringData:
      overrides: |
        crds:
          enabled: true
  2: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      annotations:
        argocd.argoproj.io/sync-options: ControllerReferencesOnly=true
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: cert-manager
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-cert-manager
    spec:
      bootstrap: true
      chart:
        name: cert-manager
        repo: https://charts.jetstack.io
        version: v1.17.0
      clusterName: RELEASE-NAME
      releaseName: cert-manager
      targetNamespace: cert-manager
      valuesSources:
        - secret:
            key: overrides
            name: RELEASE-NAME-cert-manager-config
  3: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: cni-calico
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-cni-calico-config
    stringData:
      defaults: |
        installation:
          nodeMetricsPort: 9091
          typhaMetricsPort: 9093
          calicoNetwork:
            bgp: Disabled
            nodeAddressAutodetectionV4:
              kubernetes: NodeInternalIP
            ipPools:
        {% for cidr in cluster.spec.clusterNetwork.pods.cidrBlocks %}
              - blockSize: 26
                cidr: {{ cidr }}
                disableBGPExport: false
                encapsulation: VXLAN
                natOutgoing: Enabled
                nodeSelector: all()
        {% endfor %}
      overrides: |
        nodeSelector:
          node-role.kubernetes.io/control-plane: ""
  4: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: cni-calico
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-cni-calico
    spec:
      bootstrap: true
      chart:
        name: tigera-operator
        repo: https://projectcalico.docs.tigera.io/charts
        version: v3.31.3
      clusterName: RELEASE-NAME
      releaseName: cni-calico
      targetNamespace: tigera-operator
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-cni-calico-config
        - secret:
            key: overrides
            name: RELEASE-NAME-cni-calico-config
  5: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: cni-calico-globalnetpolicy
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-cni-calico-globalnetpolicy
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - template: "---\napiVersion: projectcalico.org/v3\nkind: GlobalNetworkPolicy\nmetadata:\n  name: default.RELEASE-NAME-deny-egress\nspec:\n  order: 10\n  namespaceSelector: kubernetes.io/metadata.name != 'openstack-system'\n  types:\n    - Egress\n  egress:\n    - action: Deny\n      ipVersion: 4\n      destination:\n        nets:\n          - 169.254.169.254/32\n        \n    - action: Deny\n      ipVersion: 6\n      destination:\n        nets:\n          - fe80::a9fe:a9fe/128\n        \n---\napiVersion: projectcalico.org/v3\nkind: GlobalNetworkPolicy\nmetadata:\n  name: default.RELEASE-NAME-allow-global-egress\nspec:\n  order: 20\n  types:\n    - Egress\n  egress:\n    - action: Allow\n      ipVersion: 4\n      destination:\n        nets:\n          - 0.0.0.0/0\n        \n    - action: Allow\n      ipVersion: 6\n      destination:\n        nets:\n          - ::/0\n"
      releaseName: cni-calico-metadata-global-netpolicy
      targetNamespace: tigera-operator
  6: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: cni-calico-monitoring
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-cni-calico-monitoring
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - template: |
            apiVersion: v1
            kind: Service
            metadata:
              name: cni-calico-monitoring-kube-controllers
              namespace: calico-system
              labels:
                app.kubernetes.io/name: cni-calico-monitoring
                app.kubernetes.io/component: kube-controllers
            spec:
              clusterIP: None
              ports:
                - name: metrics-port
                  port: 9094
              selector:
                k8s-app: calico-kube-controllers
            ---
            apiVersion: monitoring.coreos.com/v1
            kind: ServiceMonitor
            metadata:
              name: cni-calico-monitoring-kube-controllers
              namespace: calico-system
            spec:
              endpoints:
                - port: metrics-port
              namespaceSelector:
                matchNames:
                  - calico-system
              selector:
                matchLabels:
                  app.kubernetes.io/name: cni-calico-monitoring
                  app.kubernetes.io/component: kube-controllers
        - template: |
            apiVersion: v1
            kind: Service
            metadata:
              name: cni-calico-monitoring-node
              namespace: calico-system
              labels:
                app.kubernetes.io/name: cni-calico-monitoring
                app.kubernetes.io/component: node
            spec:
              clusterIP: None
              ports:
                - name: metrics-port
                  port: 9091
              selector:
                k8s-app: calico-node
            ---
            apiVersion: monitoring.coreos.com/v1
            kind: ServiceMonitor
            metadata:
              name: cni-calico-monitoring-node
              namespace: calico-system
            spec:
              endpoints:
                - port: metrics-port
              namespaceSelector:
                matchNames:
                  - calico-system
              selector:
                matchLabels:
                  app.kubernetes.io/name: cni-calico-monitoring
                  app.kubernetes.io/component: node
        - template: |
            apiVersion: v1
            kind: Service
            metadata:
              name: cni-calico-monitoring-typha
              namespace: calico-system
              labels:
                app.kubernetes.io/name: cni-calico-monitoring
                app.kubernetes.io/component: typha
            spec:
              clusterIP: None
              ports:
                - name: metrics-port
                  port: 9093
              selector:
                k8s-app: calico-typha
            ---
            apiVersion: monitoring.coreos.com/v1
            kind: ServiceMonitor
            metadata:
              name: cni-calico-monitoring-typha
              namespace: calico-system
            spec:
              endpoints:
                - port: metrics-port
              namespaceSelector:
                matchNames:
                  - calico-system
              selector:
                matchLabels:
                  app.kubernetes.io/name: cni-calico-monitoring
                  app.kubernetes.io/component: typha
        - template: "apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: cni-calico-dashboards\n  labels:\n    grafana_dashboard: \"1\"\ndata:\n  cni-calico-felix-dashboard.json: |\n    {% raw %}\n    {\n        \"annotations\": {\n          \"list\": [\n            {\n              \"builtIn\": 1,\n              \"datasource\": {\n                \"type\": \"datasource\",\n                \"uid\": \"grafana\"\n              },\n              \"enable\": true,\n              \"hide\": true,\n              \"iconColor\": \"rgba(0, 211, 255, 1)\",\n              \"name\": \"Annotations & Alerts\",\n              \"type\": \"dashboard\"\n            }\n          ]\n        },\n        \"description\": \"Felix dashboard is part of calico documentation website, you will have great insight about you Calico instance by using this dashboard.\",\n        \"editable\": true,\n        \"fiscalYearStartMonth\": 0,\n        \"gnetId\": 12175,\n        \"graphTooltip\": 0,\n        \"id\": 36,\n        \"links\": [\n          {\n            \"icon\": \"external link\",\n            \"includeVars\": false,\n            \"tags\": [],\n            \"targetBlank\": true,\n            \"title\": \"Calico documentation\",\n            \"tooltip\": \"Comprehensive tutorial on how to use this dashboard.\",\n            \"type\": \"link\",\n            \"url\": \"https://docs.projectcalico.org/master/maintenance/monitor/monitor-component-visual\"\n          }\n        ],\n        \"panels\": [\n          {\n            \"collapsed\": false,\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"gridPos\": {\n              \"h\": 1,\n              \"w\": 24,\n              \"x\": 0,\n              \"y\": 0\n            },\n            \"id\": 6,\n            \"panels\": [],\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Alerts and general info\",\n            \"type\": \"row\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"description\": \"These metrics are part of general information related to your Calico implementation.\",\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                }\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 4,\n              \"w\": 8,\n              \"x\": 0,\n              \"y\": 1\n            },\n            \"id\": 2,\n            \"options\": {\n              \"minVizHeight\": 75,\n              \"minVizWidth\": 75,\n              \"orientation\": \"auto\",\n              \"reduceOptions\": {\n                \"calcs\": [\n                  \"lastNotNull\"\n                ],\n                \"fields\": \"\",\n                \"values\": false\n              },\n              \"showThresholdLabels\": false,\n              \"showThresholdMarkers\": true,\n              \"sizing\": \"auto\"\n            },\n            \"pluginVersion\": \"11.2.2+security-01\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"felix_active_local_endpoints\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}}\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Active hosts on each node\",\n            \"transparent\": true,\n            \"type\": \"gauge\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"mappings\": [\n                  {\n                    \"options\": {\n                      \"match\": \"null\",\n                      \"result\": {\n                        \"text\": \"N/A\"\n                      }\n                    },\n                    \"type\": \"special\"\n                  }\n                ],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"none\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 4,\n              \"w\": 3,\n              \"x\": 8,\n              \"y\": 1\n            },\n            \"id\": 25,\n            \"maxDataPoints\": 100,\n            \"options\": {\n              \"colorMode\": \"value\",\n              \"graphMode\": \"none\",\n              \"justifyMode\": \"auto\",\n              \"orientation\": \"horizontal\",\n              \"percentChangeColorMode\": \"standard\",\n              \"reduceOptions\": {\n                \"calcs\": [\n                  \"lastNotNull\"\n                ],\n                \"fields\": \"\",\n                \"values\": false\n              },\n              \"showPercentChange\": false,\n              \"textMode\": \"auto\",\n              \"wideLayout\": true\n            },\n            \"pluginVersion\": \"11.2.2+security-01\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"sum(rate(felix_iptables_save_errors[5m]))\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}}\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"iptables save errors\",\n            \"transparent\": true,\n            \"type\": \"stat\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"mappings\": [\n                  {\n                    \"options\": {\n                      \"match\": \"null\",\n                      \"result\": {\n                        \"text\": \"N/A\"\n                      }\n                    },\n                    \"type\": \"special\"\n                  }\n                ],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"none\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 4,\n              \"w\": 3,\n              \"x\": 11,\n              \"y\": 1\n            },\n            \"id\": 23,\n            \"maxDataPoints\": 100,\n            \"options\": {\n              \"colorMode\": \"value\",\n              \"graphMode\": \"none\",\n              \"justifyMode\": \"auto\",\n              \"orientation\": \"horizontal\",\n              \"percentChangeColorMode\": \"standard\",\n              \"reduceOptions\": {\n                \"calcs\": [\n                  \"lastNotNull\"\n                ],\n                \"fields\": \"\",\n                \"values\": false\n              },\n              \"showPercentChange\": false,\n              \"textMode\": \"auto\",\n              \"wideLayout\": true\n            },\n            \"pluginVersion\": \"11.2.2+security-01\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"sum(rate(felix_ipset_errors[5m]))\",\n                \"interval\": \"\",\n                \"legendFormat\": \"\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"ipset errors\",\n            \"transparent\": true,\n            \"type\": \"stat\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"mappings\": [\n                  {\n                    \"options\": {\n                      \"match\": \"null\",\n                      \"result\": {\n                        \"text\": \"N/A\"\n                      }\n                    },\n                    \"type\": \"special\"\n                  }\n                ],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"none\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 4,\n              \"w\": 3,\n              \"x\": 14,\n              \"y\": 1\n            },\n            \"id\": 18,\n            \"maxDataPoints\": 100,\n            \"options\": {\n              \"colorMode\": \"value\",\n              \"graphMode\": \"none\",\n              \"justifyMode\": \"auto\",\n              \"orientation\": \"horizontal\",\n              \"percentChangeColorMode\": \"standard\",\n              \"reduceOptions\": {\n                \"calcs\": [\n                  \"lastNotNull\"\n                ],\n                \"fields\": \"\",\n                \"values\": false\n              },\n              \"showPercentChange\": false,\n              \"textMode\": \"auto\",\n              \"wideLayout\": true\n            },\n            \"pluginVersion\": \"11.2.2+security-01\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"max(felix_cluster_num_hosts)\",\n                \"interval\": \"\",\n                \"legendFormat\": \"Calico node\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Active calico nodes\",\n            \"transparent\": true,\n            \"type\": \"stat\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"description\": \"This graph shows you all the errors that Calico encounters, it is important to note occasional errors are acceptable. However, rise in the number of error or constant error counters means Calico is not working properly.\",\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"color\": {\n                  \"mode\": \"palette-classic\"\n                },\n                \"custom\": {\n                  \"axisBorderShow\": false,\n                  \"axisCenteredZero\": false,\n                  \"axisColorMode\": \"text\",\n                  \"axisLabel\": \"\",\n                  \"axisPlacement\": \"auto\",\n                  \"barAlignment\": 0,\n                  \"barWidthFactor\": 0.6,\n                  \"drawStyle\": \"line\",\n                  \"fillOpacity\": 10,\n                  \"gradientMode\": \"none\",\n                  \"hideFrom\": {\n                    \"legend\": false,\n                    \"tooltip\": false,\n                    \"viz\": false\n                  },\n                  \"insertNulls\": false,\n                  \"lineInterpolation\": \"linear\",\n                  \"lineWidth\": 1,\n                  \"pointSize\": 5,\n                  \"scaleDistribution\": {\n                    \"type\": \"linear\"\n                  },\n                  \"showPoints\": \"never\",\n                  \"spanNulls\": false,\n                  \"stacking\": {\n                    \"group\": \"A\",\n                    \"mode\": \"none\"\n                  },\n                  \"thresholdsStyle\": {\n                    \"mode\": \"off\"\n                  }\n                },\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"short\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 4,\n              \"w\": 7,\n              \"x\": 17,\n              \"y\": 1\n            },\n            \"id\": 28,\n            \"options\": {\n              \"legend\": {\n                \"calcs\": [],\n                \"displayMode\": \"list\",\n                \"placement\": \"bottom\",\n                \"showLegend\": false\n              },\n              \"tooltip\": {\n                \"mode\": \"multi\",\n                \"sort\": \"asc\"\n              }\n            },\n            \"pluginVersion\": \"6.7.2\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"rate(felix_ipset_errors[5m])\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}} ipset errors\",\n                \"refId\": \"A\"\n              },\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"rate(felix_iptables_restore_errors[5m])\",\n                \"interval\": \"\",\n                \"intervalFactor\": 1,\n                \"legendFormat\": \"{{instance}} iptables restore errors\",\n                \"refId\": \"B\"\n              },\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"rate(felix_iptables_save_errors[5m])\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}} iptables save errors\",\n                \"refId\": \"C\"\n              },\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"rate(felix_log_errors[5m])\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}} log errors\",\n                \"refId\": \"D\"\n              }\n            ],\n            \"title\": \"Errors plot\",\n            \"transparent\": true,\n            \"type\": \"timeseries\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"description\": \"More policies on Felix means more effort required by Calico to manage packets. \",\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                }\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 4,\n              \"w\": 8,\n              \"x\": 0,\n              \"y\": 5\n            },\n            \"id\": 20,\n            \"options\": {\n              \"minVizHeight\": 75,\n              \"minVizWidth\": 75,\n              \"orientation\": \"auto\",\n              \"reduceOptions\": {\n                \"calcs\": [\n                  \"mean\"\n                ],\n                \"fields\": \"\",\n                \"values\": false\n              },\n              \"showThresholdLabels\": false,\n              \"showThresholdMarkers\": true,\n              \"sizing\": \"auto\"\n            },\n            \"pluginVersion\": \"11.2.2+security-01\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"felix_cluster_num_policies\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}}\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Felix cluster policies\",\n            \"transparent\": true,\n            \"type\": \"gauge\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"mappings\": [\n                  {\n                    \"options\": {\n                      \"match\": \"null\",\n                      \"result\": {\n                        \"text\": \"N/A\"\n                      }\n                    },\n                    \"type\": \"special\"\n                  }\n                ],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"none\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 4,\n              \"w\": 3,\n              \"x\": 8,\n              \"y\": 5\n            },\n            \"id\": 29,\n            \"maxDataPoints\": 100,\n            \"options\": {\n              \"colorMode\": \"value\",\n              \"graphMode\": \"none\",\n              \"justifyMode\": \"auto\",\n              \"orientation\": \"horizontal\",\n              \"percentChangeColorMode\": \"standard\",\n              \"reduceOptions\": {\n                \"calcs\": [\n                  \"lastNotNull\"\n                ],\n                \"fields\": \"\",\n                \"values\": false\n              },\n              \"showPercentChange\": false,\n              \"textMode\": \"auto\",\n              \"wideLayout\": true\n            },\n            \"pluginVersion\": \"11.2.2+security-01\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"sum(rate(felix_iptables_restore_errors[5m]))\",\n                \"interval\": \"\",\n                \"legendFormat\": \"\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"iptables restore errors\",\n            \"transparent\": true,\n            \"type\": \"stat\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"mappings\": [\n                  {\n                    \"options\": {\n                      \"match\": \"null\",\n                      \"result\": {\n                        \"text\": \"N/A\"\n                      }\n                    },\n                    \"type\": \"special\"\n                  }\n                ],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"none\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 4,\n              \"w\": 3,\n              \"x\": 11,\n              \"y\": 5\n            },\n            \"id\": 26,\n            \"maxDataPoints\": 100,\n            \"options\": {\n              \"colorMode\": \"value\",\n              \"graphMode\": \"none\",\n              \"justifyMode\": \"auto\",\n              \"orientation\": \"horizontal\",\n              \"percentChangeColorMode\": \"standard\",\n              \"reduceOptions\": {\n                \"calcs\": [\n                  \"lastNotNull\"\n                ],\n                \"fields\": \"\",\n                \"values\": false\n              },\n              \"showPercentChange\": false,\n              \"textMode\": \"auto\",\n              \"wideLayout\": true\n            },\n            \"pluginVersion\": \"11.2.2+security-01\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"sum(rate(felix_log_errors[5m]))\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}}\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Felix log errors\",\n            \"transparent\": true,\n            \"type\": \"stat\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"mappings\": [\n                  {\n                    \"options\": {\n                      \"match\": \"null\",\n                      \"result\": {\n                        \"text\": \"N/A\"\n                      }\n                    },\n                    \"type\": \"special\"\n                  }\n                ],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"none\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 4,\n              \"w\": 3,\n              \"x\": 14,\n              \"y\": 5\n            },\n            \"id\": 24,\n            \"maxDataPoints\": 100,\n            \"options\": {\n              \"colorMode\": \"value\",\n              \"graphMode\": \"none\",\n              \"justifyMode\": \"auto\",\n              \"orientation\": \"horizontal\",\n              \"percentChangeColorMode\": \"standard\",\n              \"reduceOptions\": {\n                \"calcs\": [\n                  \"mean\"\n                ],\n                \"fields\": \"\",\n                \"values\": false\n              },\n              \"showPercentChange\": false,\n              \"textMode\": \"auto\",\n              \"wideLayout\": true\n            },\n            \"pluginVersion\": \"11.2.2+security-01\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"sum(rate(felix_resyncs_started[5m])) \",\n                \"interval\": \"\",\n                \"legendFormat\": \"\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Felix resync started\",\n            \"transparent\": true,\n            \"type\": \"stat\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"color\": {\n                  \"mode\": \"palette-classic\"\n                },\n                \"custom\": {\n                  \"axisBorderShow\": false,\n                  \"axisCenteredZero\": false,\n                  \"axisColorMode\": \"text\",\n                  \"axisLabel\": \"\",\n                  \"axisPlacement\": \"auto\",\n                  \"barAlignment\": 0,\n                  \"barWidthFactor\": 0.6,\n                  \"drawStyle\": \"line\",\n                  \"fillOpacity\": 10,\n                  \"gradientMode\": \"none\",\n                  \"hideFrom\": {\n                    \"legend\": false,\n                    \"tooltip\": false,\n                    \"viz\": false\n                  },\n                  \"insertNulls\": false,\n                  \"lineInterpolation\": \"linear\",\n                  \"lineWidth\": 1,\n                  \"pointSize\": 5,\n                  \"scaleDistribution\": {\n                    \"type\": \"linear\"\n                  },\n                  \"showPoints\": \"never\",\n                  \"spanNulls\": false,\n                  \"stacking\": {\n                    \"group\": \"A\",\n                    \"mode\": \"none\"\n                  },\n                  \"thresholdsStyle\": {\n                    \"mode\": \"off\"\n                  }\n                },\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"short\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 4,\n              \"w\": 7,\n              \"x\": 17,\n              \"y\": 5\n            },\n            \"id\": 31,\n            \"options\": {\n              \"legend\": {\n                \"calcs\": [],\n                \"displayMode\": \"list\",\n                \"placement\": \"bottom\",\n                \"showLegend\": false\n              },\n              \"tooltip\": {\n                \"mode\": \"multi\",\n                \"sort\": \"none\"\n              }\n            },\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"felix_logs_dropped\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}}\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Felix dropped logs\",\n            \"transparent\": true,\n            \"type\": \"timeseries\"\n          },\n          {\n            \"collapsed\": false,\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"gridPos\": {\n              \"h\": 1,\n              \"w\": 24,\n              \"x\": 0,\n              \"y\": 9\n            },\n            \"id\": 14,\n            \"panels\": [],\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Dataplane\",\n            \"type\": \"row\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"description\": \"Dataplane apply time can indicate how busy your Kubernetes instance is. This can slow down Calico performance\",\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"color\": {\n                  \"mode\": \"palette-classic\"\n                },\n                \"custom\": {\n                  \"axisBorderShow\": false,\n                  \"axisCenteredZero\": false,\n                  \"axisColorMode\": \"text\",\n                  \"axisLabel\": \"\",\n                  \"axisPlacement\": \"auto\",\n                  \"barAlignment\": 0,\n                  \"barWidthFactor\": 0.6,\n                  \"drawStyle\": \"line\",\n                  \"fillOpacity\": 40,\n                  \"gradientMode\": \"opacity\",\n                  \"hideFrom\": {\n                    \"legend\": false,\n                    \"tooltip\": false,\n                    \"viz\": false\n                  },\n                  \"insertNulls\": false,\n                  \"lineInterpolation\": \"linear\",\n                  \"lineWidth\": 2,\n                  \"pointSize\": 5,\n                  \"scaleDistribution\": {\n                    \"type\": \"linear\"\n                  },\n                  \"showPoints\": \"never\",\n                  \"spanNulls\": false,\n                  \"stacking\": {\n                    \"group\": \"A\",\n                    \"mode\": \"none\"\n                  },\n                  \"thresholdsStyle\": {\n                    \"mode\": \"off\"\n                  }\n                },\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"short\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 7,\n              \"w\": 8,\n              \"x\": 0,\n              \"y\": 10\n            },\n            \"id\": 16,\n            \"options\": {\n              \"legend\": {\n                \"calcs\": [],\n                \"displayMode\": \"list\",\n                \"placement\": \"bottom\",\n                \"showLegend\": true\n              },\n              \"tooltip\": {\n                \"mode\": \"multi\",\n                \"sort\": \"none\"\n              }\n            },\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"felix_int_dataplane_apply_time_seconds{quantile=\\\"0.5\\\"}\",\n                \"format\": \"time_series\",\n                \"instant\": false,\n                \"interval\": \"\",\n                \"intervalFactor\": 1,\n                \"legendFormat\": \"{{instance}}\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Dataplane apply time quantile 0.5\",\n            \"transparent\": true,\n            \"type\": \"timeseries\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"color\": {\n                  \"mode\": \"palette-classic\"\n                },\n                \"custom\": {\n                  \"axisBorderShow\": false,\n                  \"axisCenteredZero\": false,\n                  \"axisColorMode\": \"text\",\n                  \"axisLabel\": \"\",\n                  \"axisPlacement\": \"auto\",\n                  \"barAlignment\": 0,\n                  \"barWidthFactor\": 0.6,\n                  \"drawStyle\": \"line\",\n                  \"fillOpacity\": 40,\n                  \"gradientMode\": \"opacity\",\n                  \"hideFrom\": {\n                    \"legend\": false,\n                    \"tooltip\": false,\n                    \"viz\": false\n                  },\n                  \"insertNulls\": false,\n                  \"lineInterpolation\": \"linear\",\n                  \"lineWidth\": 2,\n                  \"pointSize\": 5,\n                  \"scaleDistribution\": {\n                    \"type\": \"linear\"\n                  },\n                  \"showPoints\": \"never\",\n                  \"spanNulls\": false,\n                  \"stacking\": {\n                    \"group\": \"A\",\n                    \"mode\": \"none\"\n                  },\n                  \"thresholdsStyle\": {\n                    \"mode\": \"off\"\n                  }\n                },\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"short\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 7,\n              \"w\": 8,\n              \"x\": 8,\n              \"y\": 10\n            },\n            \"id\": 15,\n            \"options\": {\n              \"legend\": {\n                \"calcs\": [],\n                \"displayMode\": \"list\",\n                \"placement\": \"bottom\",\n                \"showLegend\": true\n              },\n              \"tooltip\": {\n                \"mode\": \"multi\",\n                \"sort\": \"none\"\n              }\n            },\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"felix_int_dataplane_apply_time_seconds{quantile=\\\"0.9\\\"}\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}}\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Dataplane apply time quantile 0.9\",\n            \"transparent\": true,\n            \"type\": \"timeseries\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"color\": {\n                  \"mode\": \"palette-classic\"\n                },\n                \"custom\": {\n                  \"axisBorderShow\": false,\n                  \"axisCenteredZero\": false,\n                  \"axisColorMode\": \"text\",\n                  \"axisLabel\": \"\",\n                  \"axisPlacement\": \"auto\",\n                  \"barAlignment\": 0,\n                  \"barWidthFactor\": 0.6,\n                  \"drawStyle\": \"line\",\n                  \"fillOpacity\": 40,\n                  \"gradientMode\": \"opacity\",\n                  \"hideFrom\": {\n                    \"legend\": false,\n                    \"tooltip\": false,\n                    \"viz\": false\n                  },\n                  \"insertNulls\": false,\n                  \"lineInterpolation\": \"linear\",\n                  \"lineWidth\": 2,\n                  \"pointSize\": 5,\n                  \"scaleDistribution\": {\n                    \"type\": \"linear\"\n                  },\n                  \"showPoints\": \"never\",\n                  \"spanNulls\": false,\n                  \"stacking\": {\n                    \"group\": \"A\",\n                    \"mode\": \"none\"\n                  },\n                  \"thresholdsStyle\": {\n                    \"mode\": \"off\"\n                  }\n                },\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"short\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 7,\n              \"w\": 8,\n              \"x\": 16,\n              \"y\": 10\n            },\n            \"id\": 12,\n            \"options\": {\n              \"legend\": {\n                \"calcs\": [],\n                \"displayMode\": \"list\",\n                \"placement\": \"bottom\",\n                \"showLegend\": true\n              },\n              \"tooltip\": {\n                \"mode\": \"multi\",\n                \"sort\": \"none\"\n              }\n            },\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"felix_int_dataplane_apply_time_seconds{quantile=\\\"0.99\\\"}\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}}\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Dataplane apply time quantile 0.99\",\n            \"transparent\": true,\n            \"type\": \"timeseries\"\n          },\n          {\n            \"collapsed\": false,\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"gridPos\": {\n              \"h\": 1,\n              \"w\": 24,\n              \"x\": 0,\n              \"y\": 17\n            },\n            \"id\": 35,\n            \"panels\": [],\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Route table\",\n            \"type\": \"row\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"color\": {\n                  \"mode\": \"palette-classic\"\n                },\n                \"custom\": {\n                  \"axisBorderShow\": false,\n                  \"axisCenteredZero\": false,\n                  \"axisColorMode\": \"text\",\n                  \"axisLabel\": \"\",\n                  \"axisPlacement\": \"auto\",\n                  \"barAlignment\": 0,\n                  \"barWidthFactor\": 0.6,\n                  \"drawStyle\": \"line\",\n                  \"fillOpacity\": 10,\n                  \"gradientMode\": \"none\",\n                  \"hideFrom\": {\n                    \"legend\": false,\n                    \"tooltip\": false,\n                    \"viz\": false\n                  },\n                  \"insertNulls\": false,\n                  \"lineInterpolation\": \"linear\",\n                  \"lineWidth\": 1,\n                  \"pointSize\": 5,\n                  \"scaleDistribution\": {\n                    \"type\": \"linear\"\n                  },\n                  \"showPoints\": \"never\",\n                  \"spanNulls\": false,\n                  \"stacking\": {\n                    \"group\": \"A\",\n                    \"mode\": \"none\"\n                  },\n                  \"thresholdsStyle\": {\n                    \"mode\": \"off\"\n                  }\n                },\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"short\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 7,\n              \"w\": 8,\n              \"x\": 0,\n              \"y\": 18\n            },\n            \"id\": 33,\n            \"options\": {\n              \"legend\": {\n                \"calcs\": [],\n                \"displayMode\": \"list\",\n                \"placement\": \"bottom\",\n                \"showLegend\": false\n              },\n              \"tooltip\": {\n                \"mode\": \"multi\",\n                \"sort\": \"none\"\n              }\n            },\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"felix_route_table_list_seconds{quantile=\\\"0.5\\\"}\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}}\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Felix route table list seconds quantile 0.5\",\n            \"transparent\": true,\n            \"type\": \"timeseries\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"color\": {\n                  \"mode\": \"palette-classic\"\n                },\n                \"custom\": {\n                  \"axisBorderShow\": false,\n                  \"axisCenteredZero\": false,\n                  \"axisColorMode\": \"text\",\n                  \"axisLabel\": \"\",\n                  \"axisPlacement\": \"auto\",\n                  \"barAlignment\": 0,\n                  \"barWidthFactor\": 0.6,\n                  \"drawStyle\": \"line\",\n                  \"fillOpacity\": 10,\n                  \"gradientMode\": \"none\",\n                  \"hideFrom\": {\n                    \"legend\": false,\n                    \"tooltip\": false,\n                    \"viz\": false\n                  },\n                  \"insertNulls\": false,\n                  \"lineInterpolation\": \"linear\",\n                  \"lineWidth\": 1,\n                  \"pointSize\": 5,\n                  \"scaleDistribution\": {\n                    \"type\": \"linear\"\n                  },\n                  \"showPoints\": \"never\",\n                  \"spanNulls\": false,\n                  \"stacking\": {\n                    \"group\": \"A\",\n                    \"mode\": \"none\"\n                  },\n                  \"thresholdsStyle\": {\n                    \"mode\": \"off\"\n                  }\n                },\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"short\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 7,\n              \"w\": 8,\n              \"x\": 8,\n              \"y\": 18\n            },\n            \"id\": 36,\n            \"options\": {\n              \"legend\": {\n                \"calcs\": [],\n                \"displayMode\": \"list\",\n                \"placement\": \"bottom\",\n                \"showLegend\": false\n              },\n              \"tooltip\": {\n                \"mode\": \"multi\",\n                \"sort\": \"none\"\n              }\n            },\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"felix_route_table_list_seconds{quantile=\\\"0.9\\\"}\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}}\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Felix route table list seconds quantile 0.9\",\n            \"transparent\": true,\n            \"type\": \"timeseries\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"color\": {\n                  \"mode\": \"palette-classic\"\n                },\n                \"custom\": {\n                  \"axisBorderShow\": false,\n                  \"axisCenteredZero\": false,\n                  \"axisColorMode\": \"text\",\n                  \"axisLabel\": \"\",\n                  \"axisPlacement\": \"auto\",\n                  \"barAlignment\": 0,\n                  \"barWidthFactor\": 0.6,\n                  \"drawStyle\": \"line\",\n                  \"fillOpacity\": 10,\n                  \"gradientMode\": \"none\",\n                  \"hideFrom\": {\n                    \"legend\": false,\n                    \"tooltip\": false,\n                    \"viz\": false\n                  },\n                  \"insertNulls\": false,\n                  \"lineInterpolation\": \"linear\",\n                  \"lineWidth\": 1,\n                  \"pointSize\": 5,\n                  \"scaleDistribution\": {\n                    \"type\": \"linear\"\n                  },\n                  \"showPoints\": \"never\",\n                  \"spanNulls\": false,\n                  \"stacking\": {\n                    \"group\": \"A\",\n                    \"mode\": \"none\"\n                  },\n                  \"thresholdsStyle\": {\n                    \"mode\": \"off\"\n                  }\n                },\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\",\n                      \"value\": null\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"short\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 7,\n              \"w\": 8,\n              \"x\": 16,\n              \"y\": 18\n            },\n            \"id\": 37,\n            \"options\": {\n              \"legend\": {\n                \"calcs\": [],\n                \"displayMode\": \"list\",\n                \"placement\": \"bottom\",\n                \"showLegend\": false\n              },\n              \"tooltip\": {\n                \"mode\": \"multi\",\n                \"sort\": \"none\"\n              }\n            },\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"prometheus\"\n                },\n                \"expr\": \"felix_route_table_list_seconds{quantile=\\\"0.99\\\"}\",\n                \"interval\": \"\",\n                \"legendFormat\": \"{{instance}}\",\n                \"refId\": \"A\"\n              }\n            ],\n            \"title\": \"Felix route table list seconds quantile 0.99\",\n            \"transparent\": true,\n            \"type\": \"timeseries\"\n          }\n        ],\n        \"refresh\": false,\n        \"schemaVersion\": 39,\n        \"tags\": [\n          \"calico\",\n          \"felix\",\n          \"kubernetes\",\n          \"k8s\",\n          \"calico-node\",\n          \"cloud\",\n          \"cluster monitoring\",\n          \"policy monitoring\"\n        ],\n        \"templating\": {\n          \"list\": []\n        },\n        \"time\": {\n          \"from\": \"now-6h\",\n          \"to\": \"now\"\n        },\n        \"timepicker\": {\n          \"refresh_intervals\": [\n            \"5s\",\n            \"10s\",\n            \"30s\",\n            \"1m\",\n            \"5m\",\n            \"15m\",\n            \"30m\",\n            \"1h\",\n            \"2h\",\n            \"1d\"\n          ]\n        },\n        \"timezone\": \"\",\n        \"title\": \"Felix Dashboard (Calico)\",\n        \"uid\": \"calico-felix-dashboard\",\n        \"version\": 2,\n        \"weekStart\": \"\"\n      }\n    \n    {% endraw %}\n  cni-calico-typha-dashboard.json: |\n    {% raw %}\n    {\n      \"annotations\": {\n        \"list\": [\n          {\n            \"builtIn\": 1,\n            \"datasource\": {\n              \"type\": \"grafana\",\n              \"uid\": \"-- Grafana --\"\n            },\n            \"enable\": true,\n            \"hide\": true,\n            \"iconColor\": \"rgba(0, 211, 255, 1)\",\n            \"name\": \"Annotations & Alerts\",\n            \"type\": \"dashboard\"\n          }\n        ]\n      },\n      \"editable\": true,\n      \"fiscalYearStartMonth\": 0,\n      \"graphTooltip\": 0,\n      \"id\": null,\n      \"links\": [],\n      \"liveNow\": false,\n      \"panels\": [\n        {\n          \"collapsed\": false,\n          \"datasource\": \"Prometheus\",\n          \"gridPos\": {\n            \"h\": 1,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 0\n          },\n          \"id\": 23,\n          \"panels\": [],\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Top-level metrics\",\n          \"type\": \"row\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 6,\n            \"x\": 0,\n            \"y\": 1\n          },\n          \"id\": 10,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"max by (instance) (typha_cache_size)\",\n              \"format\": \"time_series\",\n              \"interval\": \"2s\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{pod}}\",\n              \"metric\": \"typha_connections_active\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 5\n            }\n          ],\n          \"title\": \"Datastore cache size\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"min\": 0,\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"percentunit\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 6,\n            \"x\": 6,\n            \"y\": 1\n          },\n          \"hideTimeOverride\": false,\n          \"id\": 4,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"rate(process_cpu_seconds_total{job=\\\"typha_metrics\\\"}[30s]) \",\n              \"format\": \"time_series\",\n              \"interval\": \"100ms\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}}\",\n              \"metric\": \"process_cpu_seconds_total\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 5\n            }\n          ],\n          \"title\": \"CPU Usage\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"bytes\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 6,\n            \"x\": 12,\n            \"y\": 1\n          },\n          \"id\": 5,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"process_resident_memory_bytes{job=\\\"typha_metrics\\\"}\\n\",\n              \"format\": \"time_series\",\n              \"interval\": \"200ms\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}}\",\n              \"metric\": \"go_memstats_alloc_bytes\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 5\n            }\n          ],\n          \"title\": \"Memory Usage\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"collapsed\": false,\n          \"datasource\": \"Prometheus\",\n          \"gridPos\": {\n            \"h\": 1,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 8\n          },\n          \"id\": 25,\n          \"panels\": [],\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Clients\",\n          \"type\": \"row\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 4,\n            \"x\": 0,\n            \"y\": 9\n          },\n          \"id\": 17,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"rate(typha_connections_accepted[1m])\",\n              \"format\": \"time_series\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}}\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 10\n            }\n          ],\n          \"title\": \"Total connections accepted\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 4,\n            \"x\": 4,\n            \"y\": 9\n          },\n          \"id\": 1,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"sum by (instance) (typha_connections_streaming)\",\n              \"format\": \"time_series\",\n              \"interval\": \"2s\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{pod}}\",\n              \"metric\": \"typha_connections_active\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 5\n            }\n          ],\n          \"title\": \"Client connections actively streaming\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"description\": \"Number of client connections dropped to rebalance load.\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"Number of dropped connections\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"min\": 0,\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 4,\n            \"x\": 8,\n            \"y\": 9\n          },\n          \"id\": 2,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"rate(typha_connections_dropped[$__rate_interval])\",\n              \"format\": \"time_series\",\n              \"interval\": \"2s\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}}\",\n              \"metric\": \"typha_connections_dropped\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 5\n            }\n          ],\n          \"title\": \"Rebalanced client connenctions\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"description\": \"This metric measures how far behind Typha's clients are at reading updates.\\nIt goes up if the client is slow or if Typha is overloaded and it cannot keep up with writes to all its clients.\\nIt is normal for this to spike when new clients connect, they must download and process the snapshot, during which time they get slightly behind.\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"line+area\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"transparent\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"#EAB839\",\n                    \"value\": 10\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 60\n                  }\n                ]\n              },\n              \"unit\": \"s\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 4,\n            \"x\": 12,\n            \"y\": 9\n          },\n          \"id\": 3,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"max by (instance) (typha_client_latency_secs{quantile='0.99'})\",\n              \"format\": \"time_series\",\n              \"interval\": \"2s\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}}\",\n              \"metric\": \"typha_client_latency_secs_sum\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 5\n            }\n          ],\n          \"title\": \"99%ile Client fall-behind\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"s\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 4,\n            \"x\": 16,\n            \"y\": 9\n          },\n          \"id\": 22,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"max by (instance) (typha_client_write_latency_secs)\",\n              \"format\": \"time_series\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}}\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 10\n            }\n          ],\n          \"title\": \"99%ile write latency\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"description\": \"This metric tracks how long it takes for Typha's clients to respond to pings over the Typha protocol.\\nAn increase in this metric indicates that the clients, network or Typha are more heavily loaded.\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"line+area\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"transparent\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 1\n                  }\n                ]\n              },\n              \"unit\": \"s\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 4,\n            \"x\": 20,\n            \"y\": 9\n          },\n          \"id\": 13,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"max by (instance) (typha_ping_latency{quantile=\\\"0.99\\\"})\",\n              \"format\": \"time_series\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}}\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 10\n            }\n          ],\n          \"title\": \"99%ile client ping latency\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"collapsed\": false,\n          \"datasource\": \"Prometheus\",\n          \"gridPos\": {\n            \"h\": 1,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 16\n          },\n          \"id\": 26,\n          \"panels\": [],\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Cache internals\",\n          \"type\": \"row\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"description\": \"Internally, Typha stores datastore changes as a series of blocks called breadcrumbs.\\nThe default maximum size of a block is 100 so, if Typha is consistently generating size-100 blocks it may be overloaded.\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": true,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"line+area\"\n                }\n              },\n              \"mappings\": [],\n              \"max\": 110,\n              \"min\": 0,\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"transparent\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 95\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 10,\n            \"w\": 6,\n            \"x\": 0,\n            \"y\": 17\n          },\n          \"id\": 9,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"max by (instance) (typha_breadcrumb_size{quantile=\\\"0.99\\\"})\",\n              \"format\": \"time_series\",\n              \"interval\": \"1s\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}} \",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 5\n            }\n          ],\n          \"title\": \"99%ile Breadcrumb Size\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"description\": \"Internally, Typha stores datastore changes as a series of blocks called \\\"breadcrumbs\\\".\\nEach client \\\"follows the breadcrumbs\\\" either by blocking and waiting or skipping straight to the next one (non-blocking) if it is already available.\\nAs load on Typha increases, the ratio of skip ahead non-blocking reads increases.  If it approaches 100% then Typha may be overloaded (since clients only do non-blocking reads when they're behind).\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": true,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"line+area\"\n                }\n              },\n              \"mappings\": [],\n              \"max\": 1.1,\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"transparent\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"#EAB839\",\n                    \"value\": 0.9\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 1\n                  }\n                ]\n              },\n              \"unit\": \"percentunit\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 10,\n            \"w\": 6,\n            \"x\": 6,\n            \"y\": 17\n          },\n          \"id\": 8,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"(sum by (instance) (rate(typha_breadcrumb_non_block[30s])))/((sum by (instance) (rate(typha_breadcrumb_non_block[30s])))+(sum by (instance) (rate(typha_breadcrumb_block[30s]))))\",\n              \"format\": \"time_series\",\n              \"interval\": \"1s\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}}\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 5\n            }\n          ],\n          \"title\": \"Non-blocking breadcrumb fraction\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"description\": \"This panel shows the rate of updates from the datastore(s).\\nFor example, updates to Pods/Nodes/Policies/etc.\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 10,\n            \"w\": 6,\n            \"x\": 12,\n            \"y\": 17\n          },\n          \"id\": 15,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"sum by (instance) (rate(typha_updates_total[$__rate_interval]))\",\n              \"format\": \"time_series\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}}\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 10\n            }\n          ],\n          \"title\": \"Datastore updates total\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"description\": \"This panel shows the number of updates from the datastore that Typha detected were no-ops.\\nFor example, an update to a Kubernetes Node resource that didn't touch any values that Calico cares about.\\nSuch updates are not propagated to clients, saving resources.\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"#EAB839\",\n                    \"value\": \"\"\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 10,\n            \"w\": 6,\n            \"x\": 18,\n            \"y\": 17\n          },\n          \"id\": 16,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"sum by (instance) (rate(typha_updates_skipped[$__rate_interval]))\",\n              \"format\": \"time_series\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}}\",\n              \"range\": true,\n              \"refId\": \"B\",\n              \"step\": 10\n            }\n          ],\n          \"title\": \"Datastore updates skipped as no-ops\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"collapsed\": false,\n          \"datasource\": \"Prometheus\",\n          \"gridPos\": {\n            \"h\": 1,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 27\n          },\n          \"id\": 27,\n          \"panels\": [],\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Snapshot details\",\n          \"type\": \"row\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"description\": \"This panel shows the 99%ile time to stream the initial datastore snapshot to each clients.\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"min\": 0,\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"s\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 6,\n            \"x\": 0,\n            \"y\": 28\n          },\n          \"id\": 12,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"max by (instance) (typha_client_snapshot_send_secs{quantile=\\\"0.5\\\"})\",\n              \"format\": \"time_series\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}}\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 10\n            }\n          ],\n          \"title\": \"Median snapshot send time\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"description\": \"After sending the snapshot to the client, Typha allows a grace period for the client to catch up to the most recent data.\\nThis metric tracks how many clients required the grace period.\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"min\": 0,\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 6,\n            \"x\": 6,\n            \"y\": 28\n          },\n          \"id\": 21,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"sum by (instance) (typha_connections_grace_used)\",\n              \"format\": \"time_series\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"{{instance}}\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 10\n            }\n          ],\n          \"title\": \"Clients requiring grace period\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"mappings\": [\n                {\n                  \"options\": {\n                    \"match\": \"null\",\n                    \"result\": {\n                      \"text\": \"N/A\"\n                    }\n                  },\n                  \"type\": \"special\"\n                }\n              ],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"bytes\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 6,\n            \"x\": 12,\n            \"y\": 28\n          },\n          \"id\": 18,\n          \"maxDataPoints\": 100,\n          \"options\": {\n            \"colorMode\": \"none\",\n            \"graphMode\": \"none\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"lastNotNull\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"max(typha_snapshot_raw_bytes)\",\n              \"format\": \"time_series\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 40\n            }\n          ],\n          \"title\": \"Max snapshot size (raw)\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": \"Prometheus\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"mappings\": [\n                {\n                  \"options\": {\n                    \"match\": \"null\",\n                    \"result\": {\n                      \"text\": \"N/A\"\n                    }\n                  },\n                  \"type\": \"special\"\n                }\n              ],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"bytes\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 6,\n            \"x\": 18,\n            \"y\": 28\n          },\n          \"id\": 19,\n          \"maxDataPoints\": 100,\n          \"options\": {\n            \"colorMode\": \"none\",\n            \"graphMode\": \"none\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"lastNotNull\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"10.4.0\",\n          \"targets\": [\n            {\n              \"datasource\": \"Prometheus\",\n              \"editorMode\": \"code\",\n              \"expr\": \"max(typha_snapshot_compressed_bytes)\",\n              \"format\": \"time_series\",\n              \"intervalFactor\": 2,\n              \"legendFormat\": \"\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 40\n            }\n          ],\n          \"title\": \"Max snapshot size (compressed)\",\n          \"type\": \"stat\"\n        }\n      ],\n      \"refresh\": \"\",\n      \"schemaVersion\": 39,\n      \"tags\": [],\n      \"templating\": {\n        \"list\": []\n      },\n      \"time\": {\n        \"from\": \"now-30m\",\n        \"to\": \"now\"\n      },\n      \"timepicker\": {\n        \"refresh_intervals\": [\n          \"5s\",\n          \"10s\",\n          \"30s\",\n          \"1m\",\n          \"5m\",\n          \"15m\",\n          \"30m\",\n          \"1h\",\n          \"2h\",\n          \"1d\"\n        ],\n        \"time_options\": [\n          \"5m\",\n          \"15m\",\n          \"1h\",\n          \"6h\",\n          \"12h\",\n          \"24h\",\n          \"2d\",\n          \"7d\",\n          \"30d\"\n        ]\n      },\n      \"timezone\": \"browser\",\n      \"title\": \"Calico Typha\",\n      \"uid\": \"calico-typha-dashboard\",\n      \"version\": 7,\n      \"weekStart\": \"\"\n    }\n    \n    {% endraw %}\n"
      releaseName: cni-calico-monitoring
      targetNamespace: tigera-operator
  7: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: csi-cephfs
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-csi-cephfs-config
    stringData:
      defaults: |
        # Adjust the provisioner settings to allow it to deploy on a single node
        provisioner:
          replicaCount: 1
        # Allow the node plugin to run on the control plane nodes
        nodeplugin:
          tolerations:
            - key: node-role.kubernetes.io/master
              effect: NoSchedule
            - key: node-role.kubernetes.io/control-plane
              effect: NoSchedule
      overrides: |
        {}
  8: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: csi-cephfs
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-csi-cephfs
    spec:
      bootstrap: true
      chart:
        name: ceph-csi-cephfs
        repo: https://ceph.github.io/csi-charts
        version: 3.11.0
      clusterName: RELEASE-NAME
      releaseName: csi-cephfs
      targetNamespace: csi-ceph-system
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-csi-cephfs-config
        - secret:
            key: overrides
            name: RELEASE-NAME-csi-cephfs-config
  9: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: my-custom-helm-release
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-my-custom-helm-release-config
    stringData:
      values: |
        {%- raw %}
        {}
        {%- endraw %}
  10: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: my-custom-helm-release
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-my-custom-helm-release
    spec:
      bootstrap: true
      chart:
        name: my-chart
        repo: https://my-project/charts
        version: 1.5.0
      clusterName: RELEASE-NAME
      releaseName: my-custom-helm-release
      targetNamespace: my-namespace
      valuesSources:
        - secret:
            key: values
            name: RELEASE-NAME-my-custom-helm-release-config
  11: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: my-custom-manifests
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-my-custom-manifests-config
    stringData:
      secret.yaml: |
        {%- raw %}
        apiVersion: v1
        kind: Secret
        metadata:
          name: my-secret
        stringData:
          secret-file: "secret-data"
        {%- endraw %}
  12: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: my-custom-manifests
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-my-custom-manifests
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - secret:
            name: RELEASE-NAME-my-custom-manifests-config
      releaseName: my-custom-manifests
      targetNamespace: my-namespace
  13: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: etcd-defrag
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-etcd-defrag-config
    stringData:
      overrides: |
        {}
  14: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: etcd-defrag
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-etcd-defrag
    spec:
      bootstrap: true
      chart:
        name: etcd-defrag
        repo: https://azimuth-cloud.github.io/capi-helm-charts
        version: 0.1.0
      clusterName: RELEASE-NAME
      releaseName: etcd-defrag
      targetNamespace: kube-system
      valuesSources:
        - secret:
            key: overrides
            name: RELEASE-NAME-etcd-defrag-config
  15: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: ingress-nginx
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-ingress-nginx-config
    stringData:
      defaults: |
        controller:
          metrics:
            enabled: true
            serviceMonitor:
              enabled: true
      overrides: |
        {}
  16: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: ingress-nginx
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-ingress-nginx
    spec:
      bootstrap: true
      chart:
        name: ingress-nginx
        repo: https://kubernetes.github.io/ingress-nginx
        version: 4.14.3
      clusterName: RELEASE-NAME
      releaseName: ingress-nginx
      targetNamespace: ingress-nginx
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-ingress-nginx-config
        - secret:
            key: overrides
            name: RELEASE-NAME-ingress-nginx-config
  17: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: ingress-nginx-dashboards
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-ingress-nginx-dashboards
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - template: "apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: ingress-nginx-dashboards\n  labels:\n    grafana_dashboard: \"1\"\ndata:\n  nginx-ingress-dashboard.json: |\n    {% raw %}\n    {\n      \"annotations\": {\n        \"list\": [\n          {\n            \"builtIn\": 1,\n            \"datasource\": {\n              \"type\": \"datasource\",\n              \"uid\": \"grafana\"\n            },\n            \"enable\": true,\n            \"hide\": true,\n            \"iconColor\": \"rgba(0, 211, 255, 1)\",\n            \"name\": \"Annotations & Alerts\",\n            \"target\": {\n              \"limit\": 100,\n              \"matchAny\": false,\n              \"tags\": [],\n              \"type\": \"dashboard\"\n            },\n            \"type\": \"dashboard\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"enable\": true,\n            \"expr\": \"sum(changes(nginx_ingress_controller_config_last_reload_successful_timestamp_seconds{instance!=\\\"unknown\\\",controller_class=~\\\"$controller_class\\\",namespace=~\\\"$namespace\\\"}[30s])) by (controller_class)\",\n            \"hide\": false,\n            \"iconColor\": \"rgba(255, 96, 96, 1)\",\n            \"limit\": 100,\n            \"name\": \"Config Reloads\",\n            \"showIn\": 0,\n            \"step\": \"30s\",\n            \"tagKeys\": \"controller_class\",\n            \"tags\": [],\n            \"titleFormat\": \"Config Reloaded\",\n            \"type\": \"tags\"\n          }\n        ]\n      },\n      \"description\": \"Ingress-nginx supports a rich collection of prometheus metrics. If you have prometheus and grafana installed on your cluster then prometheus will already be scraping this data due to the scrape annotation on the deployment.\",\n      \"editable\": true,\n      \"fiscalYearStartMonth\": 0,\n      \"gnetId\": 9614,\n      \"graphTooltip\": 0,\n      \"id\": 35,\n      \"links\": [],\n      \"liveNow\": false,\n      \"panels\": [\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"rgb(31, 120, 193)\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [\n                {\n                  \"options\": {\n                    \"match\": \"null\",\n                    \"result\": {\n                      \"text\": \"N/A\"\n                    }\n                  },\n                  \"type\": \"special\"\n                }\n              ],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"ops\"\n            },\n            \"overrides\": []\n          },\n          \"id\": 20,\n          \"maxDataPoints\": 100,\n          \"options\": {\n            \"colorMode\": \"none\",\n            \"graphMode\": \"area\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"mean\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.2.2+security-01\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"editorMode\": \"code\",\n              \"expr\": \"round(sum(irate(nginx_ingress_controller_nginx_process_requests_total{controller_pod=~\\\"$controller\\\",controller_class=~\\\"$controller_class\\\",namespace=~\\\"$namespace\\\"}[2m])), 0.001)\",\n              \"format\": \"time_series\",\n              \"intervalFactor\": 1,\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 4\n            }\n          ],\n          \"title\": \"Controller Request Volume\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"rgb(31, 120, 193)\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [\n                {\n                  \"options\": {\n                    \"match\": \"null\",\n                    \"result\": {\n                      \"text\": \"N/A\"\n                    }\n                  },\n                  \"type\": \"special\"\n                }\n              ],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 3,\n            \"w\": 6,\n            \"x\": 6,\n            \"y\": 0\n          },\n          \"id\": 82,\n          \"maxDataPoints\": 100,\n          \"options\": {\n            \"colorMode\": \"none\",\n            \"graphMode\": \"area\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"mean\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.2.2+security-01\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"sum(avg_over_time(nginx_ingress_controller_nginx_process_connections{controller_pod=~\\\"$controller\\\",controller_class=~\\\"$controller_class\\\",controller_namespace=~\\\"$namespace\\\"}[2m]))\",\n              \"format\": \"time_series\",\n              \"instant\": false,\n              \"intervalFactor\": 1,\n              \"refId\": \"A\",\n              \"step\": 4\n            }\n          ],\n          \"title\": \"Controller Connections\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"rgb(31, 120, 193)\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [\n                {\n                  \"options\": {\n                    \"match\": \"null\",\n                    \"result\": {\n                      \"text\": \"N/A\"\n                    }\n                  },\n                  \"type\": \"special\"\n                }\n              ],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"rgba(245, 54, 54, 0.9)\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"rgba(237, 129, 40, 0.89)\",\n                    \"value\": 95\n                  },\n                  {\n                    \"color\": \"rgba(50, 172, 45, 0.97)\",\n                    \"value\": 99\n                  }\n                ]\n              },\n              \"unit\": \"percentunit\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 3,\n            \"w\": 6,\n            \"x\": 12,\n            \"y\": 0\n          },\n          \"id\": 21,\n          \"maxDataPoints\": 100,\n          \"options\": {\n            \"colorMode\": \"none\",\n            \"graphMode\": \"area\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"mean\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.2.2+security-01\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"editorMode\": \"code\",\n              \"expr\": \"sum(rate(nginx_ingress_controller_nginx_process_requests_total{controller_pod=~\\\"$controller\\\",controller_class=~\\\"$controller_class\\\",namespace=~\\\"$namespace\\\",status!~\\\"[4-5].*\\\"}[2m])) / sum(rate(nginx_ingress_controller_nginx_process_requests_total{controller_pod=~\\\"$controller\\\",controller_class=~\\\"$controller_class\\\",namespace=~\\\"$namespace\\\"}[2m]))\",\n              \"format\": \"time_series\",\n              \"intervalFactor\": 1,\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 4\n            }\n          ],\n          \"title\": \"Controller Success Rate (non-4|5xx responses)\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"rgb(31, 120, 193)\",\n                \"mode\": \"fixed\"\n              },\n              \"decimals\": 0,\n              \"mappings\": [\n                {\n                  \"options\": {\n                    \"match\": \"null\",\n                    \"result\": {\n                      \"text\": \"N/A\"\n                    }\n                  },\n                  \"type\": \"special\"\n                }\n              ],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 3,\n            \"w\": 3,\n            \"x\": 18,\n            \"y\": 0\n          },\n          \"id\": 81,\n          \"maxDataPoints\": 100,\n          \"options\": {\n            \"colorMode\": \"none\",\n            \"graphMode\": \"area\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"mean\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.2.2+security-01\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"avg(nginx_ingress_controller_success{controller_pod=~\\\"$controller\\\",controller_class=~\\\"$controller_class\\\",controller_namespace=~\\\"$namespace\\\"})\",\n              \"format\": \"time_series\",\n              \"instant\": true,\n              \"intervalFactor\": 1,\n              \"refId\": \"A\",\n              \"step\": 4\n            }\n          ],\n          \"title\": \"Config Reloads\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"rgb(31, 120, 193)\",\n                \"mode\": \"fixed\"\n              },\n              \"decimals\": 0,\n              \"mappings\": [\n                {\n                  \"options\": {\n                    \"match\": \"null\",\n                    \"result\": {\n                      \"text\": \"N/A\"\n                    }\n                  },\n                  \"type\": \"special\"\n                }\n              ],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 3,\n            \"w\": 3,\n            \"x\": 21,\n            \"y\": 0\n          },\n          \"id\": 83,\n          \"maxDataPoints\": 100,\n          \"options\": {\n            \"colorMode\": \"none\",\n            \"graphMode\": \"area\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"mean\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.2.2+security-01\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"editorMode\": \"code\",\n              \"expr\": \"count(nginx_ingress_controller_config_last_reload_successful{controller_pod=~\\\"$controller\\\",controller_namespace=~\\\"$namespace\\\"} == 0)\",\n              \"format\": \"time_series\",\n              \"instant\": true,\n              \"intervalFactor\": 1,\n              \"refId\": \"A\",\n              \"step\": 4\n            }\n          ],\n          \"title\": \"Last Config Failed\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 2,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": true,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"reqps\"\n            },\n            \"overrides\": [\n              {\n                \"matcher\": {\n                  \"id\": \"byValue\",\n                  \"options\": {\n                    \"op\": \"gte\",\n                    \"reducer\": \"allIsZero\",\n                    \"value\": 0\n                  }\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"custom.hideFrom\",\n                    \"value\": {\n                      \"legend\": true,\n                      \"tooltip\": true,\n                      \"viz\": false\n                    }\n                  }\n                ]\n              }\n            ]\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 12,\n            \"x\": 0,\n            \"y\": 3\n          },\n          \"id\": 86,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [\n                \"mean\"\n              ],\n              \"displayMode\": \"table\",\n              \"placement\": \"right\",\n              \"showLegend\": false,\n              \"width\": 300\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"desc\"\n            }\n          },\n          \"pluginVersion\": \"9.3.1\",\n          \"repeatDirection\": \"h\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"editorMode\": \"code\",\n              \"expr\": \"round(sum(irate(nginx_ingress_controller_nginx_process_requests_total{controller_pod=~\\\"$controller\\\",controller_class=~\\\"$controller_class\\\",controller_namespace=~\\\"$namespace\\\",ingress=~\\\"$ingress\\\"}[2m])) by (ingress), 0.001)\",\n              \"format\": \"time_series\",\n              \"hide\": false,\n              \"instant\": false,\n              \"interval\": \"\",\n              \"intervalFactor\": 1,\n              \"legendFormat\": \"{{ ingress }}\",\n              \"metric\": \"network\",\n              \"refId\": \"A\",\n              \"step\": 10\n            }\n          ],\n          \"title\": \"Ingress Request Volume\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 0,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 2,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": true,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"percentunit\"\n            },\n            \"overrides\": [\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"max - istio-proxy\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"color\",\n                    \"value\": {\n                      \"fixedColor\": \"#890f02\",\n                      \"mode\": \"fixed\"\n                    }\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"max - master\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"color\",\n                    \"value\": {\n                      \"fixedColor\": \"#bf1b00\",\n                      \"mode\": \"fixed\"\n                    }\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"max - prometheus\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"color\",\n                    \"value\": {\n                      \"fixedColor\": \"#bf1b00\",\n                      \"mode\": \"fixed\"\n                    }\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byValue\",\n                  \"options\": {\n                    \"op\": \"gte\",\n                    \"reducer\": \"allIsNull\",\n                    \"value\": 0\n                  }\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"custom.hideFrom\",\n                    \"value\": {\n                      \"legend\": true,\n                      \"tooltip\": true,\n                      \"viz\": false\n                    }\n                  }\n                ]\n              }\n            ]\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 12,\n            \"x\": 12,\n            \"y\": 3\n          },\n          \"id\": 87,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [\n                \"mean\"\n              ],\n              \"displayMode\": \"table\",\n              \"placement\": \"right\",\n              \"showLegend\": false,\n              \"width\": 300\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"asc\"\n            }\n          },\n          \"pluginVersion\": \"9.3.1\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"editorMode\": \"code\",\n              \"expr\": \"sum(rate(nginx_ingress_controller_nginx_process_requests_total{controller_pod=~\\\"$controller\\\",controller_class=~\\\"$controller_class\\\",namespace=~\\\"$namespace\\\",ingress=~\\\"$ingress\\\",status!~\\\"[4-5].*\\\"}[2m])) by (ingress) / sum(rate(nginx_ingress_controller_nginx_process_requests_total{controller_pod=~\\\"$controller\\\",controller_class=~\\\"$controller_class\\\",namespace=~\\\"$namespace\\\",ingress=~\\\"$ingress\\\"}[2m])) by (ingress)\",\n              \"format\": \"time_series\",\n              \"instant\": false,\n              \"interval\": \"10s\",\n              \"intervalFactor\": 1,\n              \"legendFormat\": \"{{ ingress }}\",\n              \"metric\": \"container_memory_usage:sort_desc\",\n              \"refId\": \"A\",\n              \"step\": 10\n            }\n          ],\n          \"title\": \"Ingress Success Rate (non-4|5xx responses)\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 2,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": true,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"Bps\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 6,\n            \"w\": 8,\n            \"x\": 0,\n            \"y\": 10\n          },\n          \"id\": 32,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [\n                \"mean\",\n                \"lastNotNull\"\n              ],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false,\n              \"width\": 200\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"9.3.1\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"editorMode\": \"code\",\n              \"expr\": \"sum (irate (nginx_ingress_controller_nginx_process_read_bytes_total{controller_pod=~\\\"$controller\\\",controller_class=~\\\"$controller_class\\\",controller_namespace=~\\\"$namespace\\\"}[2m]))\",\n              \"format\": \"time_series\",\n              \"instant\": false,\n              \"interval\": \"10s\",\n              \"intervalFactor\": 1,\n              \"legendFormat\": \"Received\",\n              \"metric\": \"network\",\n              \"refId\": \"A\",\n              \"step\": 10\n            },\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"- sum (irate (nginx_ingress_controller_response_size_sum{controller_pod=~\\\"$controller\\\",controller_class=~\\\"$controller_class\\\",controller_namespace=~\\\"$namespace\\\"}[2m]))\",\n              \"format\": \"time_series\",\n              \"hide\": false,\n              \"interval\": \"10s\",\n              \"intervalFactor\": 1,\n              \"legendFormat\": \"Sent\",\n              \"metric\": \"network\",\n              \"refId\": \"B\",\n              \"step\": 10\n            }\n          ],\n          \"title\": \"Network I/O pressure\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 0,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 2,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": true,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"bytes\"\n            },\n            \"overrides\": [\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"max - istio-proxy\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"color\",\n                    \"value\": {\n                      \"fixedColor\": \"#890f02\",\n                      \"mode\": \"fixed\"\n                    }\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"max - master\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"color\",\n                    \"value\": {\n                      \"fixedColor\": \"#bf1b00\",\n                      \"mode\": \"fixed\"\n                    }\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"max - prometheus\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"color\",\n                    \"value\": {\n                      \"fixedColor\": \"#bf1b00\",\n                      \"mode\": \"fixed\"\n                    }\n                  }\n                ]\n              }\n            ]\n          },\n          \"gridPos\": {\n            \"h\": 6,\n            \"w\": 8,\n            \"x\": 8,\n            \"y\": 10\n          },\n          \"id\": 77,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [\n                \"mean\",\n                \"lastNotNull\"\n              ],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false,\n              \"width\": 200\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"desc\"\n            }\n          },\n          \"pluginVersion\": \"9.3.1\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"avg(nginx_ingress_controller_nginx_process_resident_memory_bytes{controller_pod=~\\\"$controller\\\",controller_class=~\\\"$controller_class\\\",controller_namespace=~\\\"$namespace\\\"}) \",\n              \"format\": \"time_series\",\n              \"instant\": false,\n              \"interval\": \"10s\",\n              \"intervalFactor\": 1,\n              \"legendFormat\": \"nginx\",\n              \"metric\": \"container_memory_usage:sort_desc\",\n              \"refId\": \"A\",\n              \"step\": 10\n            }\n          ],\n          \"title\": \"Average Memory Usage\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"default\": true,\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"cores\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 0,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 2,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": true,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"line+area\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"transparent\",\n                    \"value\": null\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": [\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"max - istio-proxy\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"color\",\n                    \"value\": {\n                      \"fixedColor\": \"#890f02\",\n                      \"mode\": \"fixed\"\n                    }\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"max - master\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"color\",\n                    \"value\": {\n                      \"fixedColor\": \"#bf1b00\",\n                      \"mode\": \"fixed\"\n                    }\n                  }\n                ]\n              }\n            ]\n          },\n          \"gridPos\": {\n            \"h\": 6,\n            \"w\": 8,\n            \"x\": 16,\n            \"y\": 10\n          },\n          \"id\": 79,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [\n                \"mean\",\n                \"lastNotNull\"\n              ],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"desc\"\n            }\n          },\n          \"pluginVersion\": \"9.3.1\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"editorMode\": \"code\",\n              \"expr\": \"sum(rate (nginx_ingress_controller_nginx_process_cpu_seconds_total{controller_pod=~\\\"$controller\\\",controller_class=~\\\"$controller_class\\\",controller_namespace=~\\\"$namespace\\\"}[2m])) \",\n              \"format\": \"time_series\",\n              \"interval\": \"10s\",\n              \"intervalFactor\": 1,\n              \"legendFormat\": \"nginx\",\n              \"metric\": \"container_cpu\",\n              \"range\": true,\n              \"refId\": \"A\",\n              \"step\": 10\n            }\n          ],\n          \"title\": \"Average CPU Usage\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"default\": true,\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"custom\": {\n                \"align\": \"auto\",\n                \"cellOptions\": {\n                  \"type\": \"auto\"\n                },\n                \"inspect\": false\n              },\n              \"displayName\": \"\",\n              \"mappings\": [\n                {\n                  \"options\": {\n                    \"_\": {\n                      \"index\": 0,\n                      \"text\": \"Default\"\n                    }\n                  },\n                  \"type\": \"value\"\n                }\n              ],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"red\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"#EAB839\",\n                    \"value\": 604800\n                  },\n                  {\n                    \"color\": \"green\",\n                    \"value\": 2592000\n                  }\n                ]\n              },\n              \"unit\": \"s\"\n            },\n            \"overrides\": [\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"Value\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"custom.cellOptions\",\n                    \"value\": {\n                      \"mode\": \"basic\",\n                      \"type\": \"color-background\"\n                    }\n                  }\n                ]\n              }\n            ]\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 16\n          },\n          \"id\": 85,\n          \"options\": {\n            \"cellHeight\": \"sm\",\n            \"footer\": {\n              \"countRows\": false,\n              \"enablePagination\": true,\n              \"fields\": \"\",\n              \"reducer\": [\n                \"sum\"\n              ],\n              \"show\": false\n            },\n            \"showHeader\": true\n          },\n          \"pluginVersion\": \"11.2.2+security-01\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": false,\n              \"expr\": \"avg(nginx_ingress_controller_ssl_expire_time_seconds{kubernetes_pod_name=~\\\"$controller\\\",namespace=~\\\"$namespace\\\",ingress=~\\\"$ingress\\\"}) by (host) - time()\",\n              \"format\": \"table\",\n              \"instant\": true,\n              \"intervalFactor\": 1,\n              \"legendFormat\": \"{{ host }}\",\n              \"metric\": \"gke_letsencrypt_cert_expiration\",\n              \"range\": false,\n              \"refId\": \"A\",\n              \"step\": 1\n            }\n          ],\n          \"title\": \"Ingress Certificate Expiry\",\n          \"transformations\": [\n            {\n              \"id\": \"organize\",\n              \"options\": {\n                \"excludeByName\": {\n                  \"Time\": true\n                },\n                \"includeByName\": {},\n                \"indexByName\": {},\n                \"renameByName\": {\n                  \"Value\": \"TTL\",\n                  \"host\": \"Host\"\n                }\n              }\n            }\n          ],\n          \"type\": \"table\"\n        }\n      ],\n      \"refresh\": \"5s\",\n      \"schemaVersion\": 39,\n      \"tags\": [\n        \"nginx\"\n      ],\n      \"templating\": {\n        \"list\": [\n          {\n            \"allValue\": \".*\",\n            \"current\": {\n              \"selected\": false,\n              \"text\": \"All\",\n              \"value\": \"$__all\"\n            },\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"definition\": \"\",\n            \"hide\": 0,\n            \"includeAll\": true,\n            \"label\": \"Namespace\",\n            \"multi\": false,\n            \"name\": \"namespace\",\n            \"options\": [],\n            \"query\": {\n              \"query\": \"label_values(nginx_ingress_controller_config_hash, controller_namespace)\",\n              \"refId\": \"Prometheus-namespace-Variable-Query\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"skipUrlSync\": false,\n            \"sort\": 0,\n            \"tagValuesQuery\": \"\",\n            \"tagsQuery\": \"\",\n            \"type\": \"query\",\n            \"useTags\": false\n          },\n          {\n            \"allValue\": \".*\",\n            \"current\": {\n              \"selected\": false,\n              \"text\": \"All\",\n              \"value\": \"$__all\"\n            },\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"definition\": \"\",\n            \"hide\": 0,\n            \"includeAll\": true,\n            \"label\": \"Controller Class\",\n            \"multi\": false,\n            \"name\": \"controller_class\",\n            \"options\": [],\n            \"query\": {\n              \"query\": \"label_values(nginx_ingress_controller_config_hash{namespace=~\\\"$namespace\\\"}, controller_class) \",\n              \"refId\": \"Prometheus-controller_class-Variable-Query\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"skipUrlSync\": false,\n            \"sort\": 0,\n            \"tagValuesQuery\": \"\",\n            \"tagsQuery\": \"\",\n            \"type\": \"query\",\n            \"useTags\": false\n          },\n          {\n            \"allValue\": \".*\",\n            \"current\": {\n              \"selected\": false,\n              \"text\": \"All\",\n              \"value\": \"$__all\"\n            },\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"definition\": \"\",\n            \"hide\": 0,\n            \"includeAll\": true,\n            \"label\": \"Controller\",\n            \"multi\": false,\n            \"name\": \"controller\",\n            \"options\": [],\n            \"query\": {\n              \"query\": \"label_values(nginx_ingress_controller_config_hash{namespace=~\\\"$namespace\\\",controller_class=~\\\"$controller_class\\\"}, controller_pod) \",\n              \"refId\": \"Prometheus-controller-Variable-Query\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"skipUrlSync\": false,\n            \"sort\": 0,\n            \"tagValuesQuery\": \"\",\n            \"tagsQuery\": \"\",\n            \"type\": \"query\",\n            \"useTags\": false\n          },\n          {\n            \"allValue\": \".*\",\n            \"current\": {\n              \"selected\": false,\n              \"text\": \"All\",\n              \"value\": \"$__all\"\n            },\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"definition\": \"\",\n            \"hide\": 0,\n            \"includeAll\": true,\n            \"label\": \"Ingress\",\n            \"multi\": false,\n            \"name\": \"ingress\",\n            \"options\": [],\n            \"query\": {\n              \"query\": \"label_values(nginx_ingress_controller_requests{namespace=~\\\"$namespace\\\",controller_class=~\\\"$controller_class\\\",controller=~\\\"$controller\\\"}, ingress) \",\n              \"refId\": \"Prometheus-ingress-Variable-Query\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"skipUrlSync\": false,\n            \"sort\": 2,\n            \"tagValuesQuery\": \"\",\n            \"tagsQuery\": \"\",\n            \"type\": \"query\",\n            \"useTags\": false\n          }\n        ]\n      },\n      \"time\": {\n        \"from\": \"now-1h\",\n        \"to\": \"now\"\n      },\n      \"timepicker\": {\n        \"refresh_intervals\": [\n          \"5s\",\n          \"10s\",\n          \"30s\",\n          \"2m\",\n          \"5m\",\n          \"15m\",\n          \"30m\",\n          \"1h\",\n          \"2h\",\n          \"1d\"\n        ],\n        \"time_options\": [\n          \"5m\",\n          \"15m\",\n          \"1h\",\n          \"6h\",\n          \"12h\",\n          \"24h\",\n          \"2d\",\n          \"7d\",\n          \"30d\"\n        ]\n      },\n      \"timezone\": \"browser\",\n      \"title\": \"NGINX Ingress controller\",\n      \"uid\": \"nginx\",\n      \"version\": 2,\n      \"weekStart\": \"\"\n    }\n    \n    {% endraw %}\n"
      releaseName: ingress-nginx-dashboards
      targetNamespace: ingress-nginx
  18: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: ingress-nginx-alerts
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-ingress-nginx-alerts
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - template: |
            {% raw %}
            apiVersion: monitoring.coreos.com/v1
            kind: PrometheusRule
            metadata:
              name: ingress-nginx-alerts
            spec:
              groups:
              - name: ingress_nginx.rules
                rules:
                  - alert: NginxIngressCertificateExpiresSoon
                    expr: |
                      (7 * 24 * 3600) <= (last_over_time(nginx_ingress_controller_ssl_expire_time_seconds[10m]) - time()) < (30 * 24 * 3600)
                    for: 0m
                    annotations:
                      message: "The cert {{ $labels.name }} is {{ $value | humanizeDuration }} from expiry."
                    labels:
                      severity: warning
                  - alert: NginxIngressCertificateExpiresVerySoon
                    expr: |
                      0 <= (last_over_time(nginx_ingress_controller_ssl_expire_time_seconds[10m]) - time()) < (7 * 24 * 3600)
                    for: 0m
                    annotations:
                      message: "The cert {{ $labels.name }} is {{ $value | humanizeDuration }} from expiry."
                    labels:
                      severity: critical
                  - alert: NginxIngressCertificateExpired
                    expr: |
                      (last_over_time(nginx_ingress_controller_ssl_expire_time_seconds[10m]) - time()) < 0
                    for: 0m
                    annotations:
                      message: "The cert {{ $labels.name }} has expired."
                    labels:
                      severity: critical
            {% endraw %}
      releaseName: ingress-nginx-alerts
      targetNamespace: ingress-nginx
  19: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: intel-device-plugin-gpu
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-intel-device-plugin-gpu-config
    stringData:
      overrides: |
        enableMonitoring: true
        logLevel: 4
        preferredAllocationPolicy: none
        sharedDevNum: 1
        tolerations:
        - effect: NoSchedule
          key: gpu.intel.com/i915
          operator: Exists
  20: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      annotations:
        argocd.argoproj.io/sync-options: ControllerReferencesOnly=true
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: intel-device-plugin-gpu
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-intel-device-plugin-gpu
    spec:
      bootstrap: true
      chart:
        name: intel-device-plugins-gpu
        repo: https://intel.github.io/helm-charts
        version: 0.32.0
      clusterName: RELEASE-NAME
      releaseName: intel-device-plugin-gpu
      targetNamespace: intel
      valuesSources:
        - secret:
            key: overrides
            name: RELEASE-NAME-intel-device-plugin-gpu-config
  21: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: intel-xpumanager-services
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-intel-xpumanager-services
    spec:
      clusterName: RELEASE-NAME
      manifestSources:
        - template: |
            #
            # Copyright (C) 2021-2023 Intel Corporation
            # SPDX-License-Identifier: MIT
            # @file service-intel-xpum.yaml
            #
            apiVersion: v1
            kind: Service
            metadata:
              labels:
                app: intel-xpumanager
              name: intel-xpumanager
            spec:
              ports:
              - name: metrics
                port: 29999
                protocol: TCP
              selector:
                app: intel-xpumanager
              sessionAffinity: None
        - template: |
            #
            # Copyright (C) 2021-2023 Intel Corporation
            # SPDX-License-Identifier: MIT
            # @file servicemonitor-intel-xpum.yaml
            #
            apiVersion: monitoring.coreos.com/v1
            kind: ServiceMonitor
            metadata:
              name: intel-xpumanager
              labels:
                app: intel-xpumanager
            spec:
              selector:
                matchLabels:
                  app: intel-xpumanager
              namespaceSelector:
                matchNames:
                  - intel
              endpoints:
                - port: metrics
                  path: /metrics
                  interval: 5s
      releaseName: intel-xpumanager-services
      targetNamespace: intel
  22: |
    apiVersion: source.toolkit.fluxcd.io/v1
    kind: GitRepository
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: intel-xpu-monitoring-repo
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-intel-xpu-monitoring-repo
    spec:
      interval: 5m
      ref:
        tag: V1.2.39
      url: https://github.com/intel/xpumanager
  23: |
    apiVersion: kustomize.toolkit.fluxcd.io/v1
    kind: Kustomization
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: intel-xpu-monitoring
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-intel-xpu-monitoring
    spec:
      interval: 10m
      kubeConfig:
        secretRef:
          name: RELEASE-NAME-kubeconfig
      patches:
        - patch: |
            - op: add
              path: /spec/template/spec/tolerations
              value:
                - key: "gpu.intel.com/i915"
                  operator: "Exists"
                  effect: "NoSchedule"
          target:
            kind: DaemonSet
            name: intel-xpumanager
      path: ./deployment/kubernetes/daemonset/base
      prune: true
      sourceRef:
        kind: GitRepository
        name: RELEASE-NAME-intel-xpu-monitoring-repo
      targetNamespace: intel
      timeout: 1m
  24: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      annotations:
        argocd.argoproj.io/sync-options: ControllerReferencesOnly=true
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: intel-xpu-dashboard
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-intel-xpu-dashboard
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - template: "apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: xpu-manager-dashboard\n  labels:\n    grafana_dashboard: \"1\"\ndata:\n  intel-xpu-dashboard.json: |\n    {% raw %}\n      {\n          \"annotations\": {\n            \"list\": [\n              {\n                \"builtIn\": 1,\n                \"datasource\": \"-- Grafana --\",\n                \"enable\": true,\n                \"hide\": true,\n                \"iconColor\": \"rgba(0, 211, 255, 1)\",\n                \"name\": \"Annotations & Alerts\",\n                \"target\": {\n                  \"limit\": 100,\n                  \"matchAny\": false,\n                  \"tags\": [],\n                  \"type\": \"dashboard\"\n                },\n                \"type\": \"dashboard\"\n              }\n            ]\n          },\n          \"editable\": true,\n          \"gnetId\": null,\n          \"graphTooltip\": 0,\n          \"id\": 26,\n          \"iteration\": 1647584693304,\n          \"links\": [],\n          \"panels\": [\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"percentunit\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 8,\n                \"x\": 0,\n                \"y\": 0\n              },\n              \"id\": 39,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_engine_ratio{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"GPU Utilization\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"thresholds\"\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"percentunit\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 4,\n                \"x\": 8,\n                \"y\": 0\n              },\n              \"id\": 34,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"reduceOptions\": {\n                  \"calcs\": [\n                    \"lastNotNull\"\n                  ],\n                  \"fields\": \"\",\n                  \"values\": false\n                },\n                \"showThresholdLabels\": false,\n                \"showThresholdMarkers\": true,\n                \"text\": {}\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_engine_ratio{node=\\\"$Node\\\"}\",\n                  \"instant\": false,\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"GPU Utilization\",\n              \"type\": \"gauge\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"rothz\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 8,\n                \"x\": 12,\n                \"y\": 0\n              },\n              \"id\": 2,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_frequency_mhz{node=\\\"$Node\\\"}*1000000\",\n                  \"hide\": false,\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}: {{type}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"GPU Frequency\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"thresholds\"\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"rothz\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 4,\n                \"x\": 20,\n                \"y\": 0\n              },\n              \"id\": 35,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"reduceOptions\": {\n                  \"calcs\": [\n                    \"lastNotNull\"\n                  ],\n                  \"fields\": \"\",\n                  \"values\": false\n                },\n                \"showThresholdLabels\": false,\n                \"showThresholdMarkers\": true,\n                \"text\": {}\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_frequency_mhz{node=\\\"$Node\\\"}*1000000\",\n                  \"hide\": false,\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}: {{type}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"GPU Frequency\",\n              \"type\": \"gauge\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"celsius\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 8,\n                \"x\": 0,\n                \"y\": 7\n              },\n              \"id\": 8,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_temperature_celsius{node=\\\"$Node\\\", location=\\\"gpu\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"avg: {{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                },\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_max_temperature_celsius{node=\\\"$Node\\\", location=\\\"gpu\\\"}\",\n                  \"hide\": false,\n                  \"interval\": \"\",\n                  \"legendFormat\": \"max: {{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"B\"\n                }\n              ],\n              \"title\": \"GPU Temperature\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"thresholds\"\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"celsius\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 4,\n                \"x\": 8,\n                \"y\": 7\n              },\n              \"id\": 36,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"reduceOptions\": {\n                  \"calcs\": [\n                    \"lastNotNull\"\n                  ],\n                  \"fields\": \"\",\n                  \"values\": false\n                },\n                \"showThresholdLabels\": false,\n                \"showThresholdMarkers\": true,\n                \"text\": {}\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_temperature_celsius{node=\\\"$Node\\\", location=\\\"gpu\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"avg: {{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                },\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_max_temperature_celsius{node=\\\"$Node\\\", location=\\\"gpu\\\"}\",\n                  \"hide\": false,\n                  \"interval\": \"\",\n                  \"legendFormat\": \"max: {{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"B\"\n                }\n              ],\n              \"title\": \"GPU Temperature\",\n              \"type\": \"gauge\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"celsius\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 8,\n                \"x\": 12,\n                \"y\": 7\n              },\n              \"id\": 42,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_temperature_celsius{node=\\\"$Node\\\", location=\\\"mem\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"avg: {{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                },\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_max_temperature_celsius{node=\\\"$Node\\\", location=\\\"mem\\\"}\",\n                  \"hide\": false,\n                  \"interval\": \"\",\n                  \"legendFormat\": \"max: {{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"B\"\n                }\n              ],\n              \"title\": \"Memory Temperature\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"thresholds\"\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"celsius\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 4,\n                \"x\": 20,\n                \"y\": 7\n              },\n              \"id\": 43,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"reduceOptions\": {\n                  \"calcs\": [\n                    \"lastNotNull\"\n                  ],\n                  \"fields\": \"\",\n                  \"values\": false\n                },\n                \"showThresholdLabels\": false,\n                \"showThresholdMarkers\": true,\n                \"text\": {}\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_temperature_celsius{node=\\\"$Node\\\", location=\\\"mem\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"avg: {{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                },\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_max_temperature_celsius{node=\\\"$Node\\\", location=\\\"mem\\\"}\",\n                  \"hide\": false,\n                  \"interval\": \"\",\n                  \"legendFormat\": \"max: {{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"B\"\n                }\n              ],\n              \"title\": \"Memory Temperature\",\n              \"type\": \"gauge\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"watt\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 8,\n                \"x\": 0,\n                \"y\": 14\n              },\n              \"id\": 16,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_power_watts{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Power\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"thresholds\"\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"watt\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 4,\n                \"x\": 8,\n                \"y\": 14\n              },\n              \"id\": 37,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"reduceOptions\": {\n                  \"calcs\": [\n                    \"lastNotNull\"\n                  ],\n                  \"fields\": \"\",\n                  \"values\": false\n                },\n                \"showThresholdLabels\": false,\n                \"showThresholdMarkers\": true,\n                \"text\": {}\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_power_watts{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Power\",\n              \"type\": \"gauge\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"joule\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 8,\n                \"x\": 12,\n                \"y\": 14\n              },\n              \"id\": 4,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_energy_joules_total{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Energy\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"thresholds\"\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"joule\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 4,\n                \"x\": 20,\n                \"y\": 14\n              },\n              \"id\": 38,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"colorMode\": \"value\",\n                \"graphMode\": \"area\",\n                \"justifyMode\": \"auto\",\n                \"orientation\": \"auto\",\n                \"reduceOptions\": {\n                  \"calcs\": [\n                    \"lastNotNull\"\n                  ],\n                  \"fields\": \"\",\n                  \"values\": false\n                },\n                \"text\": {},\n                \"textMode\": \"auto\"\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_energy_joules_total{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Energy\",\n              \"type\": \"stat\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"linear\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"bytes\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 0,\n                \"y\": 21\n              },\n              \"id\": 12,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_memory_used_bytes{node=\\\"$Node\\\"}\",\n                  \"instant\": false,\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Memory Used\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"bytes\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 6,\n                \"y\": 21\n              },\n              \"id\": 10,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_memory_read_bytes_total{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Memory Read\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"thresholds\"\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"binBps\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 3,\n                \"x\": 12,\n                \"y\": 21\n              },\n              \"id\": 40,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"colorMode\": \"value\",\n                \"graphMode\": \"area\",\n                \"justifyMode\": \"auto\",\n                \"orientation\": \"auto\",\n                \"reduceOptions\": {\n                  \"calcs\": [\n                    \"lastNotNull\"\n                  ],\n                  \"fields\": \"\",\n                  \"values\": false\n                },\n                \"text\": {},\n                \"textMode\": \"auto\"\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"rate(xpum_memory_read_bytes_total{node=\\\"$Node\\\"}[10s])\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Mem Read Throughput\",\n              \"type\": \"stat\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"bytes\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 15,\n                \"y\": 21\n              },\n              \"id\": 14,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_memory_write_bytes_total{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Memory Write\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"thresholds\"\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"binBps\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 3,\n                \"x\": 21,\n                \"y\": 21\n              },\n              \"id\": 41,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"colorMode\": \"value\",\n                \"graphMode\": \"area\",\n                \"justifyMode\": \"auto\",\n                \"orientation\": \"auto\",\n                \"reduceOptions\": {\n                  \"calcs\": [\n                    \"lastNotNull\"\n                  ],\n                  \"fields\": \"\",\n                  \"values\": false\n                },\n                \"text\": {},\n                \"textMode\": \"auto\"\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"rate(xpum_memory_write_bytes_total{node=\\\"$Node\\\"}[10s])\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Mem Write Throughput\",\n              \"type\": \"stat\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"percentunit\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 0,\n                \"y\": 28\n              },\n              \"id\": 33,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_memory_ratio{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Memory Utilization\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"percentunit\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 6,\n                \"y\": 28\n              },\n              \"id\": 32,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_memory_bandwidth_ratio{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Memory Bandwidth\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"percentunit\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 12,\n                \"y\": 28\n              },\n              \"id\": 29,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_engine_group_ratio{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}: {{type}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Engine Group Utilization\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"description\": \"\",\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"max\": 1,\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"percentunit\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 18,\n                \"y\": 28\n              },\n              \"id\": 44,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_eu_active_ratio{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"EU Active\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"bytes\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 0,\n                \"y\": 35\n              },\n              \"id\": 47,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_pcie_read_bytes_total{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"PCIe Read\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"thresholds\"\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"binBps\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 3,\n                \"x\": 6,\n                \"y\": 35\n              },\n              \"id\": 49,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"colorMode\": \"value\",\n                \"graphMode\": \"area\",\n                \"justifyMode\": \"auto\",\n                \"orientation\": \"auto\",\n                \"reduceOptions\": {\n                  \"calcs\": [\n                    \"lastNotNull\"\n                  ],\n                  \"fields\": \"\",\n                  \"values\": false\n                },\n                \"text\": {},\n                \"textMode\": \"auto\"\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"rate(xpum_pcie_read_bytes_total{node=\\\"$Node\\\"}[10s])\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"PCIe Read Throughput\",\n              \"type\": \"stat\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"bytes\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 9,\n                \"y\": 35\n              },\n              \"id\": 48,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_pcie_write_bytes_total{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"PCIe Write\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"thresholds\"\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"binBps\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 3,\n                \"x\": 15,\n                \"y\": 35\n              },\n              \"id\": 50,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"colorMode\": \"value\",\n                \"graphMode\": \"area\",\n                \"justifyMode\": \"auto\",\n                \"orientation\": \"auto\",\n                \"reduceOptions\": {\n                  \"calcs\": [\n                    \"lastNotNull\"\n                  ],\n                  \"fields\": \"\",\n                  \"values\": false\n                },\n                \"text\": {},\n                \"textMode\": \"auto\"\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"rate(xpum_pcie_write_bytes_total{node=\\\"$Node\\\"}[10s])\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"PCIe Write Throughput\",\n              \"type\": \"stat\"\n            },\n            {\n              \"datasource\": null,\n              \"description\": \"\",\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"max\": 1,\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"percentunit\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 18,\n                \"y\": 35\n              },\n              \"id\": 45,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_eu_idle_ratio{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"EU Idle\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"linear\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  }\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 0,\n                \"y\": 42\n              },\n              \"id\": 23,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_programming_errors_total{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Programming Errors\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"linear\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  }\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 6,\n                \"y\": 42\n              },\n              \"id\": 18,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_cache_errors_total{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}: {{type}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Cache Errors\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"linear\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  }\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 12,\n                \"y\": 42\n              },\n              \"id\": 51,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_driver_errors_total{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}: {{type}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Driver Errors\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"description\": \"\",\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"max\": 1,\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"percentunit\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 18,\n                \"y\": 42\n              },\n              \"id\": 46,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_eu_stall_ratio{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"EU Stall\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"linear\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  }\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 0,\n                \"y\": 49\n              },\n              \"id\": 24,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_resets_total{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Reset Count\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"linear\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  }\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 6,\n                \"x\": 6,\n                \"y\": 49\n              },\n              \"id\": 19,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_non_compute_errors_total{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}: {{type}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Non Compute Errors\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"percentunit\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 12,\n                \"x\": 12,\n                \"y\": 49\n              },\n              \"id\": 52,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_per_engine_ratio{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}}: {{type}}-{{engine_id}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Per Engine Utilization\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"palette-classic\"\n                  },\n                  \"custom\": {\n                    \"axisLabel\": \"\",\n                    \"axisPlacement\": \"auto\",\n                    \"barAlignment\": 0,\n                    \"drawStyle\": \"line\",\n                    \"fillOpacity\": 0,\n                    \"gradientMode\": \"none\",\n                    \"hideFrom\": {\n                      \"legend\": false,\n                      \"tooltip\": false,\n                      \"viz\": false\n                    },\n                    \"lineInterpolation\": \"smooth\",\n                    \"lineWidth\": 1,\n                    \"pointSize\": 5,\n                    \"scaleDistribution\": {\n                      \"type\": \"linear\"\n                    },\n                    \"showPoints\": \"auto\",\n                    \"spanNulls\": false,\n                    \"stacking\": {\n                      \"group\": \"A\",\n                      \"mode\": \"none\"\n                    },\n                    \"thresholdsStyle\": {\n                      \"mode\": \"off\"\n                    }\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"bytes\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 12,\n                \"x\": 0,\n                \"y\": 56\n              },\n              \"id\": 53,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"legend\": {\n                  \"calcs\": [],\n                  \"displayMode\": \"list\",\n                  \"placement\": \"bottom\"\n                },\n                \"tooltip\": {\n                  \"mode\": \"single\"\n                }\n              },\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"xpum_fabric_tx_bytes_total{node=\\\"$Node\\\"}\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}} -> {{dst_pci_bdf}}/{{dst_sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Fabric Transmit Bytes\",\n              \"type\": \"timeseries\"\n            },\n            {\n              \"datasource\": null,\n              \"fieldConfig\": {\n                \"defaults\": {\n                  \"color\": {\n                    \"mode\": \"thresholds\"\n                  },\n                  \"mappings\": [],\n                  \"thresholds\": {\n                    \"mode\": \"absolute\",\n                    \"steps\": [\n                      {\n                        \"color\": \"green\",\n                        \"value\": null\n                      },\n                      {\n                        \"color\": \"red\",\n                        \"value\": 80\n                      }\n                    ]\n                  },\n                  \"unit\": \"binBps\"\n                },\n                \"overrides\": []\n              },\n              \"gridPos\": {\n                \"h\": 7,\n                \"w\": 12,\n                \"x\": 12,\n                \"y\": 56\n              },\n              \"id\": 54,\n              \"interval\": \"5s\",\n              \"options\": {\n                \"colorMode\": \"value\",\n                \"graphMode\": \"area\",\n                \"justifyMode\": \"auto\",\n                \"orientation\": \"auto\",\n                \"reduceOptions\": {\n                  \"calcs\": [\n                    \"lastNotNull\"\n                  ],\n                  \"fields\": \"\",\n                  \"values\": false\n                },\n                \"text\": {},\n                \"textMode\": \"auto\"\n              },\n              \"pluginVersion\": \"8.1.0\",\n              \"targets\": [\n                {\n                  \"exemplar\": true,\n                  \"expr\": \"rate(xpum_fabric_tx_bytes_total{node=\\\"$Node\\\"}[10s])\",\n                  \"interval\": \"\",\n                  \"legendFormat\": \"{{pci_bdf}}/{{sub_dev}} -> {{dst_pci_bdf}}/{{dst_sub_dev}}\",\n                  \"refId\": \"A\"\n                }\n              ],\n              \"title\": \"Fabric Transmit Throughput\",\n              \"type\": \"stat\"\n            }\n          ],\n          \"refresh\": \"5s\",\n          \"schemaVersion\": 30,\n          \"style\": \"dark\",\n          \"tags\": [\n            \"xpum\"\n          ],\n          \"templating\": {\n            \"list\": [\n              {\n                \"allValue\": null,\n                \"current\": {\n                  \"selected\": false,\n                  \"text\": \"dut1132-pvc-dua\",\n                  \"value\": \"dut1132-pvc-dua\"\n                },\n                \"datasource\": null,\n                \"definition\": \"label_values(xpum_power_watts, node)\",\n                \"description\": null,\n                \"error\": null,\n                \"hide\": 0,\n                \"includeAll\": false,\n                \"label\": \"Node\",\n                \"multi\": false,\n                \"name\": \"Node\",\n                \"options\": [],\n                \"query\": {\n                  \"query\": \"label_values(xpum_power_watts, node)\",\n                  \"refId\": \"StandardVariableQuery\"\n                },\n                \"refresh\": 1,\n                \"regex\": \"\",\n                \"skipUrlSync\": false,\n                \"sort\": 0,\n                \"type\": \"query\"\n              }\n            ]\n          },\n          \"time\": {\n            \"from\": \"now-5m\",\n            \"to\": \"now\"\n          },\n          \"timepicker\": {},\n          \"timezone\": \"\",\n          \"title\": \"Intel XPU Manager Exporter\",\n          \"uid\": \"9VxbZDPnk\",\n          \"version\": 3\n      }\n      \n    {% endraw %}\n"
      releaseName: xpu-manager-dashboard
      targetNamespace: intel
  25: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: intel-device-plugin-operator
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-intel-device-plugin-operator-config
    stringData:
      overrides: |
        manager:
          devices:
            gpu: true
        resources:
          limits:
            cpu: 100m
            memory: 200Mi
          requests:
            cpu: 100m
            memory: 160Mi
  26: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      annotations:
        argocd.argoproj.io/sync-options: ControllerReferencesOnly=true
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: intel-device-plugin-operator
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-intel-device-plugin-operator
    spec:
      bootstrap: true
      chart:
        name: intel-device-plugins-operator
        repo: https://intel.github.io/helm-charts
        version: 0.34.1
      clusterName: RELEASE-NAME
      releaseName: intel-device-plugin-operator
      targetNamespace: intel
      valuesSources:
        - secret:
            key: overrides
            name: RELEASE-NAME-intel-device-plugin-operator-config
  27: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: mellanox-network-operator
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-mellanox-network-operator-config
    stringData:
      defaults: |
        # Use the shared NFD
        nfd:
          enabled: false
        # Deploy the default NICClusterPolicy
        deployCR: true
        # Deploy the OFED driver onto nodes with a suitable NIC
        ofedDriver:
          deploy: true
          # OFED takes ages to deploy on low-resource nodes
          # The startup probe has a fixed failure threshold of 60
          # So in order to give the drivers up to one hour to install, we use a period
          # of 60 seconds for the startup probe
          startupProbe:
            initialDelaySeconds: 60
            periodSeconds: 60
        # Deploy the RDMA shared device plugin to allow pods to access the RDMA device
        rdmaSharedDevicePlugin:
          deploy: true
        # Disable all other features for now
        ibKubernetes:
          deploy: false
        nvPeerDriver:
          deploy: false
        sriovNetworkOperator:
          enabled: false
        sriovDevicePlugin:
          deploy: false
        secondaryNetwork:
          deploy: false
      overrides: |
        {}
  28: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: mellanox-network-operator
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-mellanox-network-operator
    spec:
      bootstrap: true
      chart:
        name: network-operator
        repo: https://helm.ngc.nvidia.com/nvidia
        version: 25.1.0
      clusterName: RELEASE-NAME
      releaseName: mellanox-network-operator
      targetNamespace: network-operator
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-mellanox-network-operator-config
        - secret:
            key: overrides
            name: RELEASE-NAME-mellanox-network-operator-config
  29: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: metrics-server
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-metrics-server-config
    stringData:
      defaults: |
        args:
          - --kubelet-insecure-tls
        # Since we deploy in kube-system, we need a PDB to allow eviction to happen
        podDisruptionBudget:
          enabled: true
          maxUnavailable: 1
      overrides: |
        {}
  30: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: metrics-server
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-metrics-server
    spec:
      bootstrap: true
      chart:
        name: metrics-server
        repo: https://kubernetes-sigs.github.io/metrics-server
        version: 3.12.2
      clusterName: RELEASE-NAME
      releaseName: metrics-server
      targetNamespace: kube-system
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-metrics-server-config
        - secret:
            key: overrides
            name: RELEASE-NAME-metrics-server-config
  31: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: blackbox-exporter
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-blackbox-exporter-config
    stringData:
      defaults: |
        serviceMonitor:
          enabled: true
          {% if cloud_identity and "clouds.yaml" in cloud_identity.data %}
          {% set clouds_data = cloud_identity.data["clouds.yaml"] | b64decode | fromyaml %}
          targets:
            {% for name, config in clouds_data.clouds.items() %}
            - name: {{ name }}-auth-url
              url: {{ config.auth.auth_url.strip("/").removesuffix("/v3") }}/v3
            {% endfor %}
          {% endif %}
      overrides: |
        {}
  32: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: blackbox-exporter
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-blackbox-exporter
    spec:
      bootstrap: true
      chart:
        name: prometheus-blackbox-exporter
        repo: https://prometheus-community.github.io/helm-charts
        version: 11.8.0
      clusterName: RELEASE-NAME
      releaseName: prometheus-blackbox-exporter
      targetNamespace: monitoring-system
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-blackbox-exporter-config
        - secret:
            key: overrides
            name: RELEASE-NAME-blackbox-exporter-config
  33: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: blackbox-exporter-dashboards
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-blackbox-exporter-dashboards
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - template: "apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: blackbox-exporter-dashboards\n  labels:\n    grafana_dashboard: \"1\"\ndata:\n  blackbox-exporter-dashboard.json: |\n    {% raw %}\n    {\n      \"annotations\": {\n        \"list\": [\n          {\n            \"builtIn\": 1,\n            \"datasource\": {\n              \"type\": \"datasource\",\n              \"uid\": \"grafana\"\n            },\n            \"enable\": true,\n            \"hide\": true,\n            \"iconColor\": \"rgba(0, 211, 255, 1)\",\n            \"name\": \"Annotations & Alerts\",\n            \"type\": \"dashboard\"\n          }\n        ]\n      },\n      \"description\": \"Blackbox exporter HTTP prober dashboard\",\n      \"editable\": true,\n      \"fiscalYearStartMonth\": 0,\n      \"gnetId\": 13659,\n      \"graphTooltip\": 0,\n      \"id\": 34,\n      \"links\": [],\n      \"liveNow\": false,\n      \"panels\": [\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"description\": \"\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"custom\": {\n                \"align\": \"left\",\n                \"cellOptions\": {\n                  \"type\": \"auto\"\n                },\n                \"filterable\": true,\n                \"inspect\": false\n              },\n              \"mappings\": [],\n              \"min\": 0,\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  }\n                ]\n              }\n            },\n            \"overrides\": [\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"SSL Cert Expiry (days)\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"decimals\",\n                    \"value\": 0\n                  },\n                  {\n                    \"id\": \"thresholds\",\n                    \"value\": {\n                      \"mode\": \"absolute\",\n                      \"steps\": [\n                        {\n                          \"color\": \"rgba(0, 0, 0, 0)\",\n                          \"value\": null\n                        },\n                        {\n                          \"color\": \"red\",\n                          \"value\": 0\n                        },\n                        {\n                          \"color\": \"orange\",\n                          \"value\": 7\n                        },\n                        {\n                          \"color\": \"green\",\n                          \"value\": 30\n                        }\n                      ]\n                    }\n                  },\n                  {\n                    \"id\": \"custom.cellOptions\",\n                    \"value\": {\n                      \"mode\": \"basic\",\n                      \"type\": \"gauge\"\n                    }\n                  },\n                  {\n                    \"id\": \"min\",\n                    \"value\": 0\n                  },\n                  {\n                    \"id\": \"max\",\n                    \"value\": 365\n                  },\n                  {\n                    \"id\": \"custom.filterable\",\n                    \"value\": false\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"Status\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"mappings\",\n                    \"value\": [\n                      {\n                        \"options\": {\n                          \"0\": {\n                            \"text\": \"DOWN\"\n                          },\n                          \"1\": {\n                            \"text\": \"UP\"\n                          }\n                        },\n                        \"type\": \"value\"\n                      }\n                    ]\n                  },\n                  {\n                    \"id\": \"thresholds\",\n                    \"value\": {\n                      \"mode\": \"absolute\",\n                      \"steps\": [\n                        {\n                          \"color\": \"red\",\n                          \"value\": null\n                        },\n                        {\n                          \"color\": \"green\",\n                          \"value\": 1\n                        }\n                      ]\n                    }\n                  },\n                  {\n                    \"id\": \"custom.cellOptions\",\n                    \"value\": {\n                      \"mode\": \"gradient\",\n                      \"type\": \"color-background\"\n                    }\n                  },\n                  {\n                    \"id\": \"custom.width\",\n                    \"value\": 76\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"Code\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"thresholds\",\n                    \"value\": {\n                      \"mode\": \"absolute\",\n                      \"steps\": [\n                        {\n                          \"color\": \"rgba(0, 0, 0, 0)\",\n                          \"value\": null\n                        },\n                        {\n                          \"color\": \"green\",\n                          \"value\": 200\n                        },\n                        {\n                          \"color\": \"orange\",\n                          \"value\": 300\n                        },\n                        {\n                          \"color\": \"red\",\n                          \"value\": 500\n                        }\n                      ]\n                    }\n                  },\n                  {\n                    \"id\": \"custom.cellOptions\",\n                    \"value\": {\n                      \"mode\": \"gradient\",\n                      \"type\": \"color-background\"\n                    }\n                  },\n                  {\n                    \"id\": \"mappings\",\n                    \"value\": [\n                      {\n                        \"options\": {\n                          \"0\": {\n                            \"text\": \"\"\n                          }\n                        },\n                        \"type\": \"value\"\n                      }\n                    ]\n                  },\n                  {\n                    \"id\": \"custom.width\",\n                    \"value\": 78\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"SSL\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"mappings\",\n                    \"value\": [\n                      {\n                        \"options\": {\n                          \"0\": {\n                            \"text\": \"NO\"\n                          },\n                          \"1\": {\n                            \"text\": \"OK\"\n                          }\n                        },\n                        \"type\": \"value\"\n                      }\n                    ]\n                  },\n                  {\n                    \"id\": \"thresholds\",\n                    \"value\": {\n                      \"mode\": \"absolute\",\n                      \"steps\": [\n                        {\n                          \"color\": \"rgba(3, 3, 3, 0)\",\n                          \"value\": null\n                        },\n                        {\n                          \"color\": \"red\",\n                          \"value\": 0\n                        },\n                        {\n                          \"color\": \"green\",\n                          \"value\": 1\n                        }\n                      ]\n                    }\n                  },\n                  {\n                    \"id\": \"custom.cellOptions\",\n                    \"value\": {\n                      \"mode\": \"gradient\",\n                      \"type\": \"color-background\"\n                    }\n                  },\n                  {\n                    \"id\": \"custom.width\",\n                    \"value\": 77\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"Probe Duration (s)\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"thresholds\",\n                    \"value\": {\n                      \"mode\": \"absolute\",\n                      \"steps\": [\n                        {\n                          \"color\": \"green\",\n                          \"value\": null\n                        },\n                        {\n                          \"color\": \"orange\",\n                          \"value\": 0.8\n                        },\n                        {\n                          \"color\": \"red\",\n                          \"value\": 2\n                        }\n                      ]\n                    }\n                  },\n                  {\n                    \"id\": \"custom.cellOptions\",\n                    \"value\": {\n                      \"mode\": \"basic\",\n                      \"type\": \"gauge\"\n                    }\n                  },\n                  {\n                    \"id\": \"custom.filterable\",\n                    \"value\": false\n                  },\n                  {\n                    \"id\": \"decimals\",\n                    \"value\": 2\n                  },\n                  {\n                    \"id\": \"max\",\n                    \"value\": 3\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"DNS Lookup Duration (s)\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"thresholds\",\n                    \"value\": {\n                      \"mode\": \"absolute\",\n                      \"steps\": [\n                        {\n                          \"color\": \"green\",\n                          \"value\": null\n                        },\n                        {\n                          \"color\": \"orange\",\n                          \"value\": 0.1\n                        },\n                        {\n                          \"color\": \"red\",\n                          \"value\": 0.2\n                        }\n                      ]\n                    }\n                  },\n                  {\n                    \"id\": \"max\",\n                    \"value\": 0.3\n                  },\n                  {\n                    \"id\": \"custom.cellOptions\",\n                    \"value\": {\n                      \"mode\": \"basic\",\n                      \"type\": \"gauge\"\n                    }\n                  },\n                  {\n                    \"id\": \"custom.filterable\",\n                    \"value\": false\n                  },\n                  {\n                    \"id\": \"decimals\",\n                    \"value\": 3\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"Target\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"links\",\n                    \"value\": [\n                      {\n                        \"targetBlank\": true,\n                        \"title\": \"${__data.fields.Target}\",\n                        \"url\": \"${__data.fields.Instance}\"\n                      }\n                    ]\n                  },\n                  {\n                    \"id\": \"custom.width\",\n                    \"value\": 276\n                  }\n                ]\n              },\n              {\n                \"matcher\": {\n                  \"id\": \"byName\",\n                  \"options\": \"TLS Version\"\n                },\n                \"properties\": [\n                  {\n                    \"id\": \"custom.width\",\n                    \"value\": 117\n                  }\n                ]\n              }\n            ]\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 0\n          },\n          \"id\": 2,\n          \"options\": {\n            \"cellHeight\": \"sm\",\n            \"footer\": {\n              \"countRows\": false,\n              \"fields\": \"\",\n              \"reducer\": [\n                \"sum\"\n              ],\n              \"show\": false\n            },\n            \"showHeader\": true,\n            \"sortBy\": [\n              {\n                \"desc\": false,\n                \"displayName\": \"SSL Cert Expiry (days)\"\n              }\n            ]\n          },\n          \"pluginVersion\": \"10.2.3\",\n          \"repeatDirection\": \"h\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"probe_success{target=~\\\"$target\\\"}\",\n              \"format\": \"table\",\n              \"instant\": true,\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"refId\": \"A\"\n            },\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"probe_http_ssl{target=~\\\"$target\\\"} > 0\",\n              \"format\": \"table\",\n              \"instant\": true,\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"refId\": \"B\"\n            },\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"(probe_ssl_earliest_cert_expiry{target=~\\\"$target\\\"} - time()) / 3600 / 24\",\n              \"format\": \"table\",\n              \"instant\": true,\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"refId\": \"C\"\n            },\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"probe_http_status_code{target=~\\\"$target\\\"} > 0\",\n              \"format\": \"table\",\n              \"instant\": true,\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"refId\": \"D\"\n            },\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"avg_over_time(probe_duration_seconds{target=~\\\"$target\\\"}[1m])\",\n              \"format\": \"table\",\n              \"hide\": false,\n              \"instant\": false,\n              \"interval\": \"\",\n              \"intervalFactor\": 1,\n              \"legendFormat\": \"\",\n              \"refId\": \"E\"\n            },\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"probe_tls_version_info{target=~\\\"$target\\\"}\",\n              \"format\": \"table\",\n              \"instant\": true,\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"refId\": \"F\"\n            },\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"avg_over_time(probe_dns_lookup_time_seconds{target=~\\\"$target\\\"}[1m])\",\n              \"format\": \"table\",\n              \"instant\": true,\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"refId\": \"G\"\n            }\n          ],\n          \"title\": \"HTTP Probe Overview\",\n          \"transformations\": [\n            {\n              \"id\": \"seriesToColumns\",\n              \"options\": {\n                \"byField\": \"target\"\n              }\n            },\n            {\n              \"id\": \"organize\",\n              \"options\": {\n                \"excludeByName\": {\n                  \"Time\": true,\n                  \"Time 1\": true,\n                  \"Time 2\": true,\n                  \"Time 3\": true,\n                  \"Time 4\": true,\n                  \"Time 5\": true,\n                  \"Time 6\": true,\n                  \"Time 7\": true,\n                  \"Time 8\": true,\n                  \"Value\": false,\n                  \"Value #A\": false,\n                  \"Value #B\": false,\n                  \"Value #F\": true,\n                  \"__name__\": true,\n                  \"__name__ 1\": true,\n                  \"__name__ 2\": true,\n                  \"__name__ 3\": true,\n                  \"__name__ 4\": true,\n                  \"__name__ 5\": true,\n                  \"__name__ 6\": true,\n                  \"__name__ 7\": true,\n                  \"container 1\": true,\n                  \"container 2\": true,\n                  \"container 3\": true,\n                  \"container 4\": true,\n                  \"container 5\": true,\n                  \"container 6\": true,\n                  \"container 7\": true,\n                  \"endpoint 1\": true,\n                  \"endpoint 2\": true,\n                  \"endpoint 3\": true,\n                  \"endpoint 4\": true,\n                  \"endpoint 5\": true,\n                  \"endpoint 6\": true,\n                  \"endpoint 7\": true,\n                  \"instance 1\": true,\n                  \"instance 2\": true,\n                  \"instance 3\": true,\n                  \"instance 4\": true,\n                  \"instance 5\": true,\n                  \"instance 6\": true,\n                  \"instance 7\": true,\n                  \"job\": true,\n                  \"job 1\": true,\n                  \"job 2\": true,\n                  \"job 3\": true,\n                  \"job 4\": true,\n                  \"job 5\": true,\n                  \"job 6\": true,\n                  \"job 7\": true,\n                  \"job 8\": true,\n                  \"namespace 1\": true,\n                  \"namespace 2\": true,\n                  \"namespace 3\": true,\n                  \"namespace 4\": true,\n                  \"namespace 5\": true,\n                  \"namespace 6\": true,\n                  \"namespace 7\": true,\n                  \"phase\": true,\n                  \"pod 1\": true,\n                  \"pod 2\": true,\n                  \"pod 3\": true,\n                  \"pod 4\": true,\n                  \"pod 5\": true,\n                  \"pod 6\": true,\n                  \"pod 7\": true,\n                  \"service 1\": true,\n                  \"service 2\": true,\n                  \"service 3\": true,\n                  \"service 4\": true,\n                  \"service 5\": true,\n                  \"service 6\": true,\n                  \"service 7\": true,\n                  \"type\": true,\n                  \"type 1\": true,\n                  \"type 2\": true,\n                  \"type 3\": true,\n                  \"type 4\": true,\n                  \"type 5\": true,\n                  \"type 6\": true,\n                  \"type 7\": true,\n                  \"type 8\": true,\n                  \"version\": false\n                },\n                \"includeByName\": {},\n                \"indexByName\": {\n                  \"Time 1\": 9,\n                  \"Time 2\": 13,\n                  \"Time 3\": 17,\n                  \"Time 4\": 20,\n                  \"Time 5\": 24,\n                  \"Time 6\": 28,\n                  \"Time 7\": 32,\n                  \"Value #A\": 1,\n                  \"Value #B\": 3,\n                  \"Value #C\": 5,\n                  \"Value #D\": 2,\n                  \"Value #E\": 6,\n                  \"Value #F\": 8,\n                  \"Value #G\": 7,\n                  \"__name__ 1\": 10,\n                  \"__name__ 2\": 14,\n                  \"__name__ 3\": 21,\n                  \"__name__ 4\": 25,\n                  \"__name__ 5\": 29,\n                  \"instance\": 1,\n                  \"job 1\": 11,\n                  \"job 2\": 15,\n                  \"job 3\": 18,\n                  \"job 4\": 22,\n                  \"job 5\": 26,\n                  \"job 6\": 30,\n                  \"target\": 0,\n                  \"type 1\": 12,\n                  \"type 2\": 16,\n                  \"type 3\": 19,\n                  \"type 4\": 23,\n                  \"type 5\": 27,\n                  \"type 6\": 31,\n                  \"version\": 4\n                },\n                \"renameByName\": {\n                  \"Value\": \"Up\",\n                  \"Value #A\": \"Status\",\n                  \"Value #B\": \"SSL\",\n                  \"Value #C\": \"SSL Cert Expiry (days)\",\n                  \"Value #D\": \"Code\",\n                  \"Value #E\": \"Probe Duration (s)\",\n                  \"Value #F\": \"\",\n                  \"Value #G\": \"DNS Lookup Duration (s)\",\n                  \"Value #H\": \"Probe IP\",\n                  \"instance\": \"URL\",\n                  \"target\": \"Target\",\n                  \"type 6\": \"\",\n                  \"version\": \"TLS Version\"\n                }\n              }\n            }\n          ],\n          \"transparent\": true,\n          \"type\": \"table\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"axisSoftMax\": 599,\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"smooth\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"auto\",\n                \"spanNulls\": true,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"dashed+area\"\n                }\n              },\n              \"mappings\": [],\n              \"max\": 600,\n              \"min\": 0,\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"#EAB839\",\n                    \"value\": 300\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 500\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 12,\n            \"x\": 0,\n            \"y\": 8\n          },\n          \"id\": 5,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"right\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum(probe_http_status_code{target=~\\\"$target\\\"}) by(target)\",\n              \"instant\": false,\n              \"legendFormat\": \"{{target}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"HTTP Status Code\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 0,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"smooth\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"auto\",\n                \"spanNulls\": true,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"s\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 12,\n            \"x\": 12,\n            \"y\": 8\n          },\n          \"id\": 6,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"right\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"desc\"\n            }\n          },\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum(probe_duration_seconds{target=~\\\"$target\\\"}) by(target)\",\n              \"hide\": false,\n              \"instant\": false,\n              \"legendFormat\": \"{{target}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"HTTP Probe Duration\",\n          \"transformations\": [],\n          \"type\": \"timeseries\"\n        }\n      ],\n      \"refresh\": \"1m\",\n      \"schemaVersion\": 39,\n      \"tags\": [\n        \"blackbox\",\n        \"prometheus\"\n      ],\n      \"templating\": {\n        \"list\": [\n          {\n            \"current\": {\n              \"selected\": false,\n              \"text\": [\n                \"All\"\n              ],\n              \"value\": [\n                \"$__all\"\n              ]\n            },\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"definition\": \"label_values(probe_success, target)\",\n            \"hide\": 0,\n            \"includeAll\": true,\n            \"multi\": true,\n            \"name\": \"target\",\n            \"options\": [],\n            \"query\": {\n              \"query\": \"label_values(probe_success, target)\",\n              \"refId\": \"StandardVariableQuery\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"skipUrlSync\": false,\n            \"sort\": 0,\n            \"tagValuesQuery\": \"\",\n            \"tagsQuery\": \"\",\n            \"type\": \"query\",\n            \"useTags\": false\n          }\n        ]\n      },\n      \"time\": {\n        \"from\": \"now-6h\",\n        \"to\": \"now\"\n      },\n      \"timepicker\": {},\n      \"timezone\": \"\",\n      \"title\": \"Blackbox Exporter (HTTP prober)\",\n      \"uid\": \"NEzutrbMk\",\n      \"version\": 10,\n      \"weekStart\": \"\"\n    }\n    \n    {% endraw %}\n"
      releaseName: blackbox-exporter-dashboards
      targetNamespace: monitoring-system
  34: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: blackbox-exporter-alerts
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-blackbox-exporter-alerts
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - template: |
            {% raw %}
            apiVersion: monitoring.coreos.com/v1
            kind: PrometheusRule
            metadata:
              name: blackbox-exporter-alerts
            spec:
              groups:
                - name: blackbox_exporter.rules
                  rules:
                    - alert: BlackboxProbeFailed
                      expr: probe_success == 0
                      for: 0m
                      labels:
                        severity: critical
                      annotations:
                        summary: Blackbox probe failed (target {{ $labels.target }})
                        description: "Blackbox probe '{{ $labels.target }}' failed"
                    - alert: BlackboxSlowProbe
                      expr: avg_over_time(probe_duration_seconds[1m]) > 1
                      for: 1m
                      labels:
                        severity: warning
                      annotations:
                        summary: Blackbox slow probe (target {{ $labels.target }})
                        description: "Blackbox probe '{{ $labels.target }}' took more than 1s to complete - {{ $value }}"
                    - alert: BlackboxProbeHttpFailure
                      expr: probe_http_status_code <= 199 OR probe_http_status_code >= 400
                      for: 0m
                      labels:
                        severity: critical
                      annotations:
                        summary: Blackbox probe HTTP failure (target {{ $labels.target }})
                        description: "Blackbox probe '{{ $labels.target }}' returned an HTTP error status - {{ $value }}"
                    - alert: BlackboxSslCertificateWillExpireSoon
                      expr: (7 * 24 * 3600) <= (last_over_time(probe_ssl_earliest_cert_expiry[10m]) - time()) < (30 * 24 * 3600)
                      for: 0m
                      labels:
                        severity: warning
                      annotations:
                        summary: Blackbox SSL certificate will expire soon (target {{ $labels.target }})
                        description: "SSL certificate for blackbox probe '{{ $labels.target }}' expires in {{ $value | humanizeDuration }}"
                    - alert: BlackboxSslCertificateWillExpireVerySoon
                      expr: 0 <= (last_over_time(probe_ssl_earliest_cert_expiry[10m]) - time()) < (7 * 24 * 3600)
                      for: 0m
                      labels:
                        severity: critical
                      annotations:
                        summary: Blackbox SSL certificate will expire very soon (target {{ $labels.target }})
                        description: "SSL certificate for blackbox probe '{{ $labels.target }}' expires in {{ $value | humanizeDuration }}"
                    - alert: BlackboxSslCertificateExpired
                      expr: (last_over_time(probe_ssl_earliest_cert_expiry[10m]) - time()) < 0
                      for: 0m
                      labels:
                        severity: critical
                      annotations:
                        summary: Blackbox SSL certificate expired (target {{ $labels.target }})
                        description: "SSL certificate for blackbox probe '{{ $labels.target }}' has expired"
            {% endraw %}
      releaseName: blackbox-exporter-alerts
      targetNamespace: monitoring-system
  35: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: kube-prometheus-stack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-kube-prometheus-stack-config
    stringData:
      defaults: |
        alertmanager:
          # Don't apply the namespace grouping by default
          config:
            route:
              group_by: ['...']
          alertmanagerSpec:
            # Make sure that alertmanager finds configurations with the alertmanager name as a label
            alertmanagerConfigSelector:
              matchLabels:
                alertmanager: kube-prometheus-stack-alertmanager
            # Do NOT add the namespace matcher to routes from AlertmanagerConfig resources
            alertmanagerConfigMatcherStrategy:
              type: None
        prometheus:
          prometheusSpec:
            # Tell Prometheus to pick up all monitors and alerting rules, regardless of labels
            podMonitorSelectorNilUsesHelmValues: false
            serviceMonitorSelectorNilUsesHelmValues: false
            ruleSelectorNilUsesHelmValues: false
            # Set the retention size to max 85% of the given volume size, to leave space for the WAL
            # To get a valid storage request, we round down to the nearest whole number
            retentionSize: 8GB
        grafana:
          sidecar:
            # Tell Grafana to include dashboards from all namespaces
            dashboards:
              searchNamespace: ALL
      overrides: |
        alertmanager:
          alertmanagerSpec:
            retention: 168h
            storage:
              volumeClaimTemplate:
                spec:
                  accessModes:
                  - ReadWriteOnce
                  resources:
                    requests:
                      storage: 10Gi
        prometheus:
          prometheusSpec:
            retention: 90d
            storageSpec:
              volumeClaimTemplate:
                spec:
                  accessModes:
                  - ReadWriteOnce
                  resources:
                    requests:
                      storage: 10Gi
  36: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: kube-prometheus-stack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-kube-prometheus-stack
    spec:
      bootstrap: true
      chart:
        name: kube-prometheus-stack
        repo: https://prometheus-community.github.io/helm-charts
        version: 80.14.4
      clusterName: RELEASE-NAME
      lifecycleHooks:
        postDelete:
          - action: delete
            apiVersion: v1
            kind: PersistentVolumeClaim
            selector:
              alertmanager: kube-prometheus-stack-alertmanager
          - action: delete
            apiVersion: v1
            kind: PersistentVolumeClaim
            selector:
              operator.prometheus.io/name: kube-prometheus-stack-prometheus
        preUpgrade:
          - action: patch
            apiVersion: v1
            kind: PersistentVolumeClaim
            options:
              data:
                spec:
                  resources:
                    requests:
                      storage: 10Gi
            selector:
              alertmanager: kube-prometheus-stack-alertmanager
          - action: patch
            apiVersion: v1
            kind: PersistentVolumeClaim
            options:
              data:
                spec:
                  resources:
                    requests:
                      storage: 10Gi
            selector:
              operator.prometheus.io/name: kube-prometheus-stack-prometheus
      releaseName: kube-prometheus-stack
      targetNamespace: monitoring-system
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-kube-prometheus-stack-config
        - secret:
            key: overrides
            name: RELEASE-NAME-kube-prometheus-stack-config
  37: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: kube-prometheus-stack-dashboards
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-kube-prometheus-stack-dashboards
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - template: "apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: additional-grafana-dashboards\n  labels:\n    grafana_dashboard: \"1\"\ndata:\n  nvidia-dcgm-exporter-dashboard.json: |\n    {% raw %}\n    {\n      \"annotations\": {\n        \"list\": [\n          {\n            \"$$hashKey\": \"object:192\",\n            \"builtIn\": 1,\n            \"datasource\": {\n              \"type\": \"datasource\",\n              \"uid\": \"grafana\"\n            },\n            \"enable\": true,\n            \"hide\": true,\n            \"iconColor\": \"rgba(0, 211, 255, 1)\",\n            \"name\": \"Annotations & Alerts\",\n            \"target\": {\n              \"limit\": 100,\n              \"matchAny\": false,\n              \"tags\": [],\n              \"type\": \"dashboard\"\n            },\n            \"type\": \"dashboard\"\n          }\n        ]\n      },\n      \"description\": \"This dashboard is to display the metrics from DCGM Exporter on a Kubernetes (1.13+) cluster\",\n      \"editable\": true,\n      \"fiscalYearStartMonth\": 0,\n      \"gnetId\": 12239,\n      \"graphTooltip\": 0,\n      \"id\": 2,\n      \"links\": [],\n      \"liveNow\": false,\n      \"panels\": [\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 2,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"links\": [],\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"celsius\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 18,\n            \"x\": 0,\n            \"y\": 0\n          },\n          \"id\": 12,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [\n                \"mean\",\n                \"lastNotNull\",\n                \"max\"\n              ],\n              \"displayMode\": \"table\",\n              \"placement\": \"right\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"9.3.1\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"DCGM_FI_DEV_GPU_TEMP{instance=~\\\"${instance}\\\", gpu=~\\\"${gpu}\\\"}\",\n              \"instant\": false,\n              \"interval\": \"\",\n              \"legendFormat\": \"GPU {{gpu}}\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"GPU Temperature\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"mappings\": [],\n              \"max\": 100,\n              \"min\": 0,\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"#EAB839\",\n                    \"value\": 83\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 87\n                  }\n                ]\n              },\n              \"unit\": \"celsius\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 6,\n            \"x\": 18,\n            \"y\": 0\n          },\n          \"id\": 14,\n          \"options\": {\n            \"minVizHeight\": 75,\n            \"minVizWidth\": 75,\n            \"orientation\": \"auto\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"mean\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showThresholdLabels\": false,\n            \"showThresholdMarkers\": true,\n            \"sizing\": \"auto\"\n          },\n          \"pluginVersion\": \"11.2.2+security-01\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"avg(DCGM_FI_DEV_GPU_TEMP{instance=~\\\"${instance}\\\", gpu=~\\\"${gpu}\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"GPU Avg. Temp\",\n          \"type\": \"gauge\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 2,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"links\": [],\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"watt\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 18,\n            \"x\": 0,\n            \"y\": 8\n          },\n          \"id\": 10,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [\n                \"mean\",\n                \"lastNotNull\",\n                \"max\"\n              ],\n              \"displayMode\": \"table\",\n              \"placement\": \"right\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"9.3.1\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"DCGM_FI_DEV_POWER_USAGE{instance=~\\\"${instance}\\\", gpu=~\\\"${gpu}\\\"}\",\n              \"interval\": \"\",\n              \"legendFormat\": \"GPU {{gpu}}\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"GPU Power Usage\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"mappings\": [],\n              \"max\": 2400,\n              \"min\": 0,\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"#EAB839\",\n                    \"value\": 1800\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 2200\n                  }\n                ]\n              },\n              \"unit\": \"watt\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 6,\n            \"x\": 18,\n            \"y\": 8\n          },\n          \"id\": 16,\n          \"options\": {\n            \"minVizHeight\": 75,\n            \"minVizWidth\": 75,\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"sum\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showThresholdLabels\": false,\n            \"showThresholdMarkers\": true,\n            \"sizing\": \"auto\"\n          },\n          \"pluginVersion\": \"11.2.2+security-01\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"sum(DCGM_FI_DEV_POWER_USAGE{instance=~\\\"${instance}\\\", gpu=~\\\"${gpu}\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"GPU Power Total\",\n          \"type\": \"gauge\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 2,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"links\": [],\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"hertz\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 12,\n            \"x\": 0,\n            \"y\": 16\n          },\n          \"id\": 2,\n          \"interval\": \"\",\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [\n                \"mean\",\n                \"lastNotNull\",\n                \"max\"\n              ],\n              \"displayMode\": \"table\",\n              \"placement\": \"right\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"9.3.1\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"DCGM_FI_DEV_SM_CLOCK{instance=~\\\"${instance}\\\", gpu=~\\\"${gpu}\\\"} * 1000000\",\n              \"format\": \"time_series\",\n              \"interval\": \"\",\n              \"intervalFactor\": 1,\n              \"legendFormat\": \"GPU {{gpu}}\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"GPU SM Clocks\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 2,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"max\": 100,\n              \"min\": 0,\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"percent\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 12,\n            \"x\": 0,\n            \"y\": 24\n          },\n          \"id\": 6,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [\n                \"mean\",\n                \"lastNotNull\",\n                \"max\"\n              ],\n              \"displayMode\": \"table\",\n              \"placement\": \"right\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"DCGM_FI_DEV_GPU_UTIL{instance=~\\\"${instance}\\\", gpu=~\\\"${gpu}\\\"}\",\n              \"interval\": \"\",\n              \"legendFormat\": \"GPU {{gpu}}\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"GPU Utilization\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 2,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"max\": 1,\n              \"min\": 0,\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"percentunit\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 12,\n            \"x\": 0,\n            \"y\": 32\n          },\n          \"id\": 4,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [\n                \"mean\",\n                \"lastNotNull\",\n                \"max\"\n              ],\n              \"displayMode\": \"table\",\n              \"placement\": \"right\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"DCGM_FI_PROF_PIPE_TENSOR_ACTIVE{instance=~\\\"${instance}\\\", gpu=~\\\"${gpu}\\\"}\",\n              \"interval\": \"\",\n              \"legendFormat\": \"GPU {{gpu}}\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Tensor Core Utilization\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 2,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"decmbytes\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 12,\n            \"x\": 0,\n            \"y\": 40\n          },\n          \"id\": 18,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [\n                \"mean\",\n                \"max\"\n              ],\n              \"displayMode\": \"list\",\n              \"placement\": \"right\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"DCGM_FI_DEV_FB_USED{instance=~\\\"${instance}\\\", gpu=~\\\"${gpu}\\\"}\",\n              \"interval\": \"\",\n              \"legendFormat\": \"GPU {{gpu}}\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"GPU Framebuffer Mem Used\",\n          \"type\": \"timeseries\"\n        }\n      ],\n      \"refresh\": false,\n      \"schemaVersion\": 39,\n      \"tags\": [],\n      \"templating\": {\n        \"list\": [\n          {\n            \"current\": {\n              \"isNone\": true,\n              \"selected\": false,\n              \"text\": \"None\",\n              \"value\": \"\"\n            },\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"definition\": \"label_values(DCGM_FI_DEV_GPU_TEMP, instance)\",\n            \"hide\": 0,\n            \"includeAll\": false,\n            \"multi\": true,\n            \"name\": \"instance\",\n            \"options\": [],\n            \"query\": {\n              \"query\": \"label_values(DCGM_FI_DEV_GPU_TEMP, instance)\",\n              \"refId\": \"Prometheus-instance-Variable-Query\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"skipUrlSync\": false,\n            \"sort\": 0,\n            \"tagValuesQuery\": \"\",\n            \"tagsQuery\": \"\",\n            \"type\": \"query\",\n            \"useTags\": false\n          },\n          {\n            \"current\": {\n              \"selected\": false,\n              \"text\": \"All\",\n              \"value\": \"$__all\"\n            },\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"prometheus\"\n            },\n            \"definition\": \"label_values(gpu)\",\n            \"hide\": 0,\n            \"includeAll\": true,\n            \"multi\": true,\n            \"name\": \"gpu\",\n            \"options\": [],\n            \"query\": {\n              \"query\": \"label_values(gpu)\",\n              \"refId\": \"Prometheus-gpu-Variable-Query\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"skipUrlSync\": false,\n            \"sort\": 1,\n            \"tagValuesQuery\": \"\",\n            \"tagsQuery\": \"\",\n            \"type\": \"query\",\n            \"useTags\": false\n          }\n        ]\n      },\n      \"time\": {\n        \"from\": \"now-15m\",\n        \"to\": \"now\"\n      },\n      \"timepicker\": {\n        \"refresh_intervals\": [\n          \"5s\",\n          \"10s\",\n          \"30s\",\n          \"1m\",\n          \"5m\",\n          \"15m\",\n          \"30m\",\n          \"1h\",\n          \"2h\",\n          \"1d\"\n        ]\n      },\n      \"timezone\": \"\",\n      \"title\": \"NVIDIA DCGM Exporter Dashboard\",\n      \"uid\": \"Oxed_c6Wz\",\n      \"version\": 1,\n      \"weekStart\": \"\"\n    }\n    \n    {% endraw %}\n"
      releaseName: kube-prometheus-stack-dashboards
      targetNamespace: monitoring-system
  38: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: loki-stack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-loki-stack-config
    stringData:
      defaults: |
        loki:
          serviceMonitor:
            enabled: true
        promtail:
          serviceMonitor:
            enabled: true
          # Get promtail to scrape systemd services
          config:
            snippets:
              extraScrapeConfigs: |
                - job_name: journal
                  journal:
                    path: /var/log/journal
                    max_age: 12h
                    labels:
                      job: systemd-journal
                  relabel_configs:
                    - source_labels: ['__journal__systemd_unit']
                      target_label: 'unit'
                    - source_labels: ['__journal__hostname']
                      target_label: 'hostname'
                    - source_labels: ['__journal_priority_keyword']
                      target_label: level
          # Mount journal directory and machine-id file into promtail pods
          extraVolumes:
            - name: journal
              hostPath:
                path: /var/log/journal
            - name: machine-id
              hostPath:
                path: /etc/machine-id
          extraVolumeMounts:
            - name: journal
              mountPath: /var/log/journal
              readOnly: true
            - name: machine-id
              mountPath: /etc/machine-id
              readOnly: true
        grafana:
          sidecar:
            datasources:
              enabled: false
      overrides: |
        loki:
          config:
            compactor:
              retention_enabled: true
            limits_config:
              retention_period: 72h
          persistence:
            enabled: true
            size: 10Gi
  39: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: loki-stack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-loki-stack
    spec:
      bootstrap: true
      chart:
        name: loki-stack
        repo: https://grafana.github.io/helm-charts
        version: 2.10.2
      clusterName: RELEASE-NAME
      lifecycleHooks:
        preUpgrade:
          - action: delete
            apiVersion: apps/v1
            kind: StatefulSet
            name: loki-stack
          - action: patch
            apiVersion: v1
            kind: PersistentVolumeClaim
            options:
              data:
                spec:
                  resources:
                    requests:
                      storage: 10Gi
            selector:
              app: loki
              release: loki-stack
      releaseName: loki-stack
      targetNamespace: monitoring-system
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-loki-stack-config
        - secret:
            key: overrides
            name: RELEASE-NAME-loki-stack-config
  40: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: loki-stack-dashboards
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-loki-stack-dashboards
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - template: |
            apiVersion: v1
            kind: ConfigMap
            metadata:
              name: loki-stack-grafana-datasource
              labels:
                grafana_datasource: "1"
            data:
              loki-datasource.yaml: |-
                apiVersion: 1
                datasources:
                  - name: Loki
                    type: loki
                    url: http://loki-stack.monitoring-system:3100
                    access: proxy
                    version: 1
                    isDefault: false
        - template: "apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: loki-stack-grafana-dashboards\n  labels:\n    grafana_dashboard: \"1\"\ndata:\n  loki-pod-logs-dashboard.json: |\n    {% raw %}\n    {\n      \"annotations\": {\n        \"list\": [\n          {\n            \"builtIn\": 1,\n            \"datasource\": {\n              \"type\": \"grafana\",\n              \"uid\": \"-- Grafana --\"\n            },\n            \"enable\": true,\n            \"hide\": true,\n            \"iconColor\": \"rgba(0, 211, 255, 1)\",\n            \"name\": \"Annotations & Alerts\",\n            \"type\": \"dashboard\"\n          }\n        ]\n      },\n      \"description\": \"Search pod logs stored in Loki\",\n      \"editable\": false,\n      \"fiscalYearStartMonth\": 0,\n      \"graphTooltip\": 0,\n      \"id\": 31,\n      \"links\": [],\n      \"panels\": [\n        {\n          \"datasource\": \"Loki\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"hidden\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"bars\",\n                \"fillOpacity\": 100,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 3,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 0\n          },\n          \"id\": 6,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"targets\": [\n            {\n              \"datasource\": \"Loki\",\n              \"expr\": \"sum(count_over_time({namespace=\\\"$namespace\\\", pod=~\\\"$pod\\\"} |~ \\\"$search\\\"[$__interval]))\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Loki\",\n          \"gridPos\": {\n            \"h\": 25,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 3\n          },\n          \"id\": 2,\n          \"maxDataPoints\": \"\",\n          \"options\": {\n            \"dedupStrategy\": \"none\",\n            \"enableLogDetails\": true,\n            \"prettifyLogMessage\": false,\n            \"showCommonLabels\": false,\n            \"showLabels\": false,\n            \"showTime\": true,\n            \"sortOrder\": \"Descending\",\n            \"wrapLogMessage\": true\n          },\n          \"targets\": [\n            {\n              \"datasource\": \"Loki\",\n              \"expr\": \"{namespace=\\\"$namespace\\\", pod=~\\\"$pod\\\"} |~ \\\"$search\\\"\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Logs Panel\",\n          \"type\": \"logs\"\n        }\n      ],\n      \"schemaVersion\": 39,\n      \"tags\": [],\n      \"templating\": {\n        \"list\": [\n          {\n            \"allValue\": \".+\",\n            \"current\": {\n              \"selected\": true,\n              \"text\": \"ingress-nginx\",\n              \"value\": \"ingress-nginx\"\n            },\n            \"datasource\": \"Loki\",\n            \"definition\": \"label_values(namespace)\",\n            \"hide\": 0,\n            \"includeAll\": false,\n            \"multi\": false,\n            \"name\": \"namespace\",\n            \"options\": [],\n            \"query\": \"label_values(namespace)\",\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"skipUrlSync\": false,\n            \"sort\": 0,\n            \"tagValuesQuery\": \"\",\n            \"tagsQuery\": \"\",\n            \"type\": \"query\",\n            \"useTags\": false\n          },\n          {\n            \"allValue\": \".+\",\n            \"current\": {\n              \"selected\": false,\n              \"text\": \"All\",\n              \"value\": \"$__all\"\n            },\n            \"datasource\": \"Loki\",\n            \"definition\": \"label_values({namespace=~\\\"$namespace\\\"}, pod)\",\n            \"hide\": 0,\n            \"includeAll\": true,\n            \"multi\": true,\n            \"name\": \"pod\",\n            \"options\": [],\n            \"query\": \"label_values({namespace=~\\\"$namespace\\\"}, pod)\",\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"skipUrlSync\": false,\n            \"sort\": 0,\n            \"tagValuesQuery\": \"\",\n            \"tagsQuery\": \"\",\n            \"type\": \"query\",\n            \"useTags\": false\n          },\n          {\n            \"current\": {},\n            \"hide\": 0,\n            \"name\": \"search\",\n            \"options\": [],\n            \"query\": \"\",\n            \"skipUrlSync\": false,\n            \"type\": \"textbox\"\n          }\n        ]\n      },\n      \"time\": {\n        \"from\": \"now-6h\",\n        \"to\": \"now\"\n      },\n      \"timepicker\": {\n        \"refresh_intervals\": [\n          \"5s\",\n          \"10s\",\n          \"30s\",\n          \"1m\",\n          \"5m\",\n          \"15m\",\n          \"30m\",\n          \"1h\",\n          \"2h\",\n          \"1d\"\n        ]\n      },\n      \"timezone\": \"\",\n      \"title\": \"Loki / Pod Logs\",\n      \"uid\": \"209fd89b771c318dd442225414a50b59\",\n      \"version\": 1,\n      \"weekStart\": \"\"\n    }\n    \n    {% endraw %}\n  loki-systemd-logs-dashboard.json: |\n    {% raw %}\n    {\n      \"annotations\": {\n        \"list\": [\n          {\n            \"builtIn\": 1,\n            \"datasource\": {\n              \"type\": \"grafana\",\n              \"uid\": \"-- Grafana --\"\n            },\n            \"enable\": true,\n            \"hide\": true,\n            \"iconColor\": \"rgba(0, 211, 255, 1)\",\n            \"name\": \"Annotations & Alerts\",\n            \"type\": \"dashboard\"\n          }\n        ]\n      },\n      \"description\": \"Search systemd logs stored in Loki\",\n      \"editable\": false,\n      \"fiscalYearStartMonth\": 0,\n      \"graphTooltip\": 0,\n      \"id\": 33,\n      \"links\": [],\n      \"panels\": [\n        {\n          \"datasource\": \"Loki\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"hidden\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"bars\",\n                \"fillOpacity\": 100,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 3,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 0\n          },\n          \"id\": 6,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"targets\": [\n            {\n              \"datasource\": \"Loki\",\n              \"expr\": \"sum(count_over_time({unit=~\\\"$unit\\\", hostname=~\\\"$hostname\\\"} |~ \\\"$search\\\"[$__interval]))\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": \"Loki\",\n          \"gridPos\": {\n            \"h\": 25,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 3\n          },\n          \"id\": 2,\n          \"maxDataPoints\": \"\",\n          \"options\": {\n            \"dedupStrategy\": \"none\",\n            \"enableLogDetails\": true,\n            \"prettifyLogMessage\": false,\n            \"showCommonLabels\": false,\n            \"showLabels\": false,\n            \"showTime\": true,\n            \"sortOrder\": \"Descending\",\n            \"wrapLogMessage\": true\n          },\n          \"targets\": [\n            {\n              \"datasource\": \"Loki\",\n              \"expr\": \"{unit=~\\\"$unit\\\", hostname=~\\\"$hostname\\\"} |~ \\\"$search\\\"\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Logs Panel\",\n          \"type\": \"logs\"\n        }\n      ],\n      \"schemaVersion\": 39,\n      \"tags\": [],\n      \"templating\": {\n        \"list\": [\n          {\n            \"allValue\": \".+\",\n            \"current\": {\n              \"selected\": true,\n              \"text\": \"ansible-init.service\",\n              \"value\": \"ansible-init.service\"\n            },\n            \"datasource\": \"Loki\",\n            \"definition\": \"label_values(unit)\",\n            \"hide\": 0,\n            \"includeAll\": false,\n            \"multi\": false,\n            \"name\": \"unit\",\n            \"options\": [],\n            \"query\": \"label_values(unit)\",\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"skipUrlSync\": false,\n            \"sort\": 0,\n            \"tagValuesQuery\": \"\",\n            \"tagsQuery\": \"\",\n            \"type\": \"query\",\n            \"useTags\": false\n          },\n          {\n            \"allValue\": \".+\",\n            \"current\": {\n              \"selected\": true,\n              \"text\": [\n                \"All\"\n              ],\n              \"value\": [\n                \"$__all\"\n              ]\n            },\n            \"datasource\": \"Loki\",\n            \"definition\": \"label_values({unit=~\\\"$unit\\\"}, hostname)\",\n            \"hide\": 0,\n            \"includeAll\": true,\n            \"multi\": true,\n            \"name\": \"hostname\",\n            \"options\": [],\n            \"query\": \"label_values({unit=~\\\"$unit\\\"}, hostname)\",\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"skipUrlSync\": false,\n            \"sort\": 0,\n            \"tagValuesQuery\": \"\",\n            \"tagsQuery\": \"\",\n            \"type\": \"query\",\n            \"useTags\": false\n          },\n          {\n            \"current\": {},\n            \"hide\": 0,\n            \"name\": \"search\",\n            \"options\": [],\n            \"query\": \"\",\n            \"skipUrlSync\": false,\n            \"type\": \"textbox\"\n          }\n        ]\n      },\n      \"time\": {\n        \"from\": \"now-3h\",\n        \"to\": \"now\"\n      },\n      \"timepicker\": {\n        \"refresh_intervals\": [\n          \"5s\",\n          \"10s\",\n          \"30s\",\n          \"1m\",\n          \"5m\",\n          \"15m\",\n          \"30m\",\n          \"1h\",\n          \"2h\",\n          \"1d\"\n        ]\n      },\n      \"timezone\": \"\",\n      \"title\": \"Loki / Systemd Logs\",\n      \"uid\": \"fa1bd43aed803111be9cc923cada9811\",\n      \"version\": 1,\n      \"weekStart\": \"\"\n    }\n    \n    {% endraw %}\n  loki-metrics-dashboard.json: |\n    {% raw %}\n    {\n      \"annotations\": {\n        \"list\": [\n          {\n            \"builtIn\": 1,\n            \"datasource\": {\n              \"type\": \"datasource\",\n              \"uid\": \"grafana\"\n            },\n            \"enable\": true,\n            \"hide\": true,\n            \"iconColor\": \"rgba(0, 211, 255, 1)\",\n            \"name\": \"Annotations & Alerts\",\n            \"type\": \"dashboard\"\n          }\n        ]\n      },\n      \"description\": \"Loki and Promtail metrics.\",\n      \"editable\": true,\n      \"fiscalYearStartMonth\": 0,\n      \"gnetId\": 10880,\n      \"graphTooltip\": 0,\n      \"id\": 32,\n      \"links\": [],\n      \"panels\": [\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 12,\n            \"x\": 0,\n            \"y\": 0\n          },\n          \"id\": 8,\n          \"interval\": \"\",\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"avg_over_time(loki_ingester_chunk_entries_count[5m])\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Loki's stored chunk entries\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 12,\n            \"x\": 12,\n            \"y\": 0\n          },\n          \"id\": 2,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"rate (loki_distributor_ingester_appends_total[1m])\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Average batch appends sent to ingesters (Loki)\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"default\": true,\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 8\n          },\n          \"id\": 6,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [\n                \"mean\",\n                \"min\",\n                \"sum\"\n              ],\n              \"displayMode\": \"table\",\n              \"placement\": \"right\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"editorMode\": \"code\",\n              \"expr\": \"sum(promtail_file_bytes_total{pod=~\\\".*\\\"}) by (pod)\",\n              \"legendFormat\": \"{{pod}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Number of bytes total by promtail\",\n          \"type\": \"timeseries\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"prometheus\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"axisBorderShow\": false,\n                \"axisCenteredZero\": false,\n                \"axisColorMode\": \"text\",\n                \"axisLabel\": \"\",\n                \"axisPlacement\": \"auto\",\n                \"barAlignment\": 0,\n                \"barWidthFactor\": 0.6,\n                \"drawStyle\": \"line\",\n                \"fillOpacity\": 10,\n                \"gradientMode\": \"none\",\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                },\n                \"insertNulls\": false,\n                \"lineInterpolation\": \"linear\",\n                \"lineWidth\": 1,\n                \"pointSize\": 5,\n                \"scaleDistribution\": {\n                  \"type\": \"linear\"\n                },\n                \"showPoints\": \"never\",\n                \"spanNulls\": false,\n                \"stacking\": {\n                  \"group\": \"A\",\n                  \"mode\": \"none\"\n                },\n                \"thresholdsStyle\": {\n                  \"mode\": \"off\"\n                }\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\",\n                    \"value\": null\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 16\n          },\n          \"id\": 4,\n          \"options\": {\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"table\",\n              \"placement\": \"right\",\n              \"showLegend\": true\n            },\n            \"tooltip\": {\n              \"mode\": \"multi\",\n              \"sort\": \"none\"\n            }\n          },\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"prometheus\"\n              },\n              \"expr\": \"sum (promtail_encoded_bytes_total{pod=~'.*'}) by (pod)\",\n              \"format\": \"time_series\",\n              \"instant\": false,\n              \"legendFormat\": \"{{ pod }}\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Number of bytes encoded and ready to send by Promtail\",\n          \"type\": \"timeseries\"\n        }\n      ],\n      \"schemaVersion\": 39,\n      \"tags\": [],\n      \"templating\": {\n        \"list\": []\n      },\n      \"time\": {\n        \"from\": \"now-6h\",\n        \"to\": \"now\"\n      },\n      \"timepicker\": {\n        \"refresh_intervals\": [\n          \"5s\",\n          \"10s\",\n          \"30s\",\n          \"1m\",\n          \"5m\",\n          \"15m\",\n          \"30m\",\n          \"1h\",\n          \"2h\",\n          \"1d\"\n        ]\n      },\n      \"timezone\": \"\",\n      \"title\": \"Loki / Metrics\",\n      \"uid\": \"MQHVDmtWk\",\n      \"version\": 1,\n      \"weekStart\": \"\"\n    }\n    {% endraw %}\n"
      releaseName: loki-stack-dashboards
      targetNamespace: monitoring-system
  41: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: node-feature-discovery
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-node-feature-discovery-config
    stringData:
      defaults: |
        master:
          extraLabelNs:
            - nvidia.com
        worker:
          # Allow the NFD pods to be scheduled on all pods
          tolerations:
            - effect: "NoSchedule"
              operator: "Exists"
          # We want to be able to identify nodes with high-performance hardware
          # So the whitelisted device classes are:
          #   02   - Network Controllers (e.g. Ethernet, Infiniband)
          #   03   - Display Controllers (e.g. GPUs)
          #   0b40 - Co-processors
          #   12   - Processing Accelerators (e.g. specialised AI inference chips)
          config:
            sources:
              pci:
                deviceClassWhitelist:
                  - "02"
                  - "03"
                  - "0b40"
                  - "12"
                deviceLabelFields:
                  - vendor
      overrides: |
        {}
  42: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: node-feature-discovery
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-node-feature-discovery
    spec:
      bootstrap: true
      chart:
        name: node-feature-discovery
        repo: https://kubernetes-sigs.github.io/node-feature-discovery/charts
        version: 0.17.3
      clusterName: RELEASE-NAME
      releaseName: node-feature-discovery
      targetNamespace: node-feature-discovery
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-node-feature-discovery-config
        - secret:
            key: overrides
            name: RELEASE-NAME-node-feature-discovery-config
  43: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: node-problem-detector
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-node-problem-detector-config
    stringData:
      defaults: |
        metrics:
          enabled: true
          prometheusRule:
            enabled: true
            defaultRules:
              create: true
          serviceMonitor:
            enabled: true
      overrides: |
        {}
  44: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: node-problem-detector
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-node-problem-detector
    spec:
      bootstrap: true
      chart:
        name: node-problem-detector
        repo: https://charts.deliveryhero.io
        version: 2.3.14
      clusterName: RELEASE-NAME
      releaseName: node-problem-detector
      targetNamespace: node-problem-detector
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-node-problem-detector-config
        - secret:
            key: overrides
            name: RELEASE-NAME-node-problem-detector-config
  45: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: nvidia-gpu-operator
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-nvidia-gpu-operator-config
    stringData:
      defaults: |
        # Use the shared NFD
        nfd:
          enabled: false
        # Export operator and node metrics in a Prometheus format.
        # The component provides information on the status of the
        # operator (e.g. reconciliation status, number of GPU enabled nodes).
        nodeStatusExporter:
          enabled: true
        toolkit:
          # Allowing the toolkit to edit /etc/containerd/config.toml (the default)
          # breaks nvidia pod deployment on clusters with Harbor cache enabled.
          # Instead make a new config file specifically for nvidia runtime config,
          # which is parsed as an "include" in the main containerd config file.
          #
          # https://github.com/NVIDIA/gpu-operator/issues/301
          env:
            - name: "CONTAINERD_CONFIG"
              value: "/etc/containerd/conf.d/nvidia.toml"
      overrides: |
        dcgmExporter:
          serviceMonitor:
            enabled: true
  46: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: nvidia-gpu-operator
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-nvidia-gpu-operator
    spec:
      bootstrap: true
      chart:
        name: gpu-operator
        repo: https://helm.ngc.nvidia.com/nvidia
        version: v25.10.1
      clusterName: RELEASE-NAME
      releaseName: nvidia-gpu-operator
      targetNamespace: gpu-operator
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-nvidia-gpu-operator-config
        - secret:
            key: overrides
            name: RELEASE-NAME-nvidia-gpu-operator-config
  47: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: ccm-openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-ccm-openstack-config
    stringData:
      defaults: |
        secret:
          create: false
        cluster:
          name: RELEASE-NAME
        controllerExtraArgs: |-
          - --use-service-account-credentials=false
        nodeSelector:
          node-role.kubernetes.io/control-plane: ""
        tolerations:
          - key: node.cloudprovider.kubernetes.io/uninitialized
            value: "true"
            effect: NoSchedule
          - key: node-role.kubernetes.io/master
            effect: NoSchedule
          - key: node-role.kubernetes.io/control-plane
            effect: NoSchedule
        commonAnnotations:
          secret.reloader.stakater.com/reload: cloud-config
      overrides: |
        {}
  48: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: ccm-openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-ccm-openstack
    spec:
      bootstrap: true
      chart:
        name: openstack-cloud-controller-manager
        repo: https://kubernetes.github.io/cloud-provider-openstack
        version: 2.32.0
      clusterName: RELEASE-NAME
      releaseName: ccm-openstack
      targetNamespace: openstack-system
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-ccm-openstack-config
        - secret:
            key: overrides
            name: RELEASE-NAME-ccm-openstack-config
  49: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: cloud-config
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-cloud-config
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - template: "apiVersion: v1\nkind: Secret\nmetadata:\n  name: cloud-config\ndata:\n  {{ cloud_identity.data | toyaml | indent(2) }}\nstringData:\n  cloud.conf: |\n    [Global]\n    use-clouds=true\n    clouds-file=/etc/config/clouds.yaml\n    cloud=openstack\n{%- if \"cacert\" in cloud_identity.data %}\n    ca-file=/etc/config/cacert\n{%- else %}\n    tls-insecure=true\n{%- endif %}\n    [Networking]\n    internal-network-name={{ infra_cluster.status.network.name }}\n    [LoadBalancer]\n    floating-network-id={{ infra_cluster.status.externalNetwork.id }}\n    [BlockStorage]\n    ignore-volume-az=true\n    \n"
      releaseName: cloud-config
      targetNamespace: openstack-system
  50: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: csi-cinder
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-csi-cinder-config
    stringData:
      defaults: |
        csi:
          plugin:
            # This has to be non-empty or the chart fails to render
            volumes:
              - name: cacert
                emptyDir: {}
            volumeMounts:
              - name: cloud-config
                mountPath: /etc/config
                readOnly: true
              - name: cloud-config
                mountPath: /etc/kubernetes
                readOnly: true
          provisioner:
            topology: "false"
        secret:
          enabled: true
          create: false
          name: cloud-config
        storageClass:
          enabled: false
        clusterID: RELEASE-NAME
        commonAnnotations:
          secret.reloader.stakater.com/reload: cloud-config
      overrides: |
        csi:
          plugin:
            controllerPlugin:
              nodeSelector:
                node-role.kubernetes.io/control-plane: ""
              tolerations:
              - effect: NoSchedule
                key: node-role.kubernetes.io/control-plane
  51: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: csi-cinder
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-csi-cinder
    spec:
      bootstrap: true
      chart:
        name: openstack-cinder-csi
        repo: https://kubernetes.github.io/cloud-provider-openstack
        version: 2.32.0
      clusterName: RELEASE-NAME
      releaseName: csi-cinder
      targetNamespace: openstack-system
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-csi-cinder-config
        - secret:
            key: overrides
            name: RELEASE-NAME-csi-cinder-config
  52: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: csi-cinder
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-csi-cinder-storageclass
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - template: |
            apiVersion: storage.k8s.io/v1
            kind: StorageClass
            metadata:
              name: csi-cinder
              annotations:
                storageclass.kubernetes.io/is-default-class: "true"
            provisioner: cinder.csi.openstack.org
            parameters:
              availability: nova
            reclaimPolicy: Delete
            allowVolumeExpansion: true
            volumeBindingMode: WaitForFirstConsumer
      releaseName: csi-cinder-storageclass
      targetNamespace: openstack-system
  53: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: csi-manila
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-csi-manila-config
    stringData:
      defaults: |
        csimanila:
          clusterID: RELEASE-NAME
        shareProtocols:
          - protocolSelector: CEPHFS
            fsGroupPolicy: None
            fwdNodePluginEndpoint:
              dir: /var/lib/kubelet/plugins/cephfs.csi.ceph.com
              sockFile: csi.sock
        # Allow the node plugin to run on the control plane nodes
        nodeplugin:
          tolerations:
            - key: node-role.kubernetes.io/master
              effect: NoSchedule
            - key: node-role.kubernetes.io/control-plane
              effect: NoSchedule
      overrides: |
        {}
  54: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: csi-manila
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-csi-manila
    spec:
      bootstrap: true
      chart:
        name: openstack-manila-csi
        repo: https://kubernetes.github.io/cloud-provider-openstack
        version: 2.30.0
      clusterName: RELEASE-NAME
      releaseName: csi-manila
      targetNamespace: openstack-system
      valuesSources:
        - secret:
            key: defaults
            name: RELEASE-NAME-csi-manila-config
        - secret:
            key: overrides
            name: RELEASE-NAME-csi-manila-config
  55: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: Manifests
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: csi-manila
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-csi-manila-storageclass
    spec:
      bootstrap: true
      clusterName: RELEASE-NAME
      manifestSources:
        - template: |
            {%- set identity_data = cloud_identity.data["clouds.yaml"] | b64decode | fromyaml -%}
            {%- set cloud_data = identity_data.clouds.openstack -%}
            {%- set tls_verify = cloud_data.verify | default(True) %}
            apiVersion: v1
            kind: Secret
            metadata:
              name: csi-manila-credentials
            stringData:
              os-authURL: >-
                {{ cloud_data.auth.auth_url }}
              os-region: >-
                {{ cloud_data.region_name }}
              {%- if cloud_data.auth_type == "v3applicationcredential" %}
              os-applicationCredentialID: >-
                {{ cloud_data.auth.application_credential_id }}
              os-applicationCredentialSecret: >-
                {{ cloud_data.auth.application_credential_secret }}
              {%- elif cloud_data.auth_type == "v3password" %}
              os-password: >-
                {{ cloud_data.auth.password }}
              {%- if "user_id" in cloud_data.auth %}
              os-userID: >-
                {{ cloud_data.auth.user_id }}
              {%- else %}
              os-userName: >-
                {{ cloud_data.auth.username }}
              {%- endif %}
              {%- if "domain_id" in cloud_data.auth %}
              os-domainID: >-
                {{ cloud_data.auth.domain_id }}
              {%- else %}
              os-domainName: >-
                {{ cloud_data.auth.domain_name }}
              {%- endif %}
              {%- if "project_id" in cloud_data.auth %}
              os-projectID: >-
                {{ cloud_data.auth.project_id }}
              {%- else %}
              os-projectName: >-
                {{ cloud_data.auth.project_name }}
              {%- endif %}
              {%- if "project_domain_id" in cloud_data.auth %}
              os-projectDomainID: >-
                {{ cloud_data.auth.project_domain_id }}
              {%- elif "project_domain_name" in cloud_data.auth %}
              os-projectDomainName: >-
                {{ cloud_data.auth.project_domain_name }}
              {%- endif %}
              {%- if "user_domain_id" in cloud_data.auth %}
              os-userDomainID: >-
                {{ cloud_data.auth.user_domain_id }}
              {%- elif "user_domain_name" in cloud_data.auth %}
              os-userDomainName: >-
                {{ cloud_data.auth.user_domain_name }}
              {%- endif %}
              {%- endif %}
              os-TLSInsecure: "{{ "false" if tls_verify else "true" }}"
        - template: |
            apiVersion: storage.k8s.io/v1
            kind: StorageClass
            metadata:
              name: csi-manila
            provisioner: cephfs.manila.csi.openstack.org
            parameters:
              csi.storage.k8s.io/provisioner-secret-name: csi-manila-credentials
              csi.storage.k8s.io/provisioner-secret-namespace: openstack-system
              csi.storage.k8s.io/controller-expand-secret-name: csi-manila-credentials
              csi.storage.k8s.io/controller-expand-secret-namespace: openstack-system
              csi.storage.k8s.io/node-stage-secret-name: csi-manila-credentials
              csi.storage.k8s.io/node-stage-secret-namespace: openstack-system
              csi.storage.k8s.io/node-publish-secret-name: csi-manila-credentials
              csi.storage.k8s.io/node-publish-secret-namespace: openstack-system
              type: cephfs
            reclaimPolicy: Delete
            allowVolumeExpansion: true
            volumeBindingMode: WaitForFirstConsumer
      releaseName: csi-manila-storageclass
      targetNamespace: openstack-system
  56: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        addons.stackhpc.com/watch: ""
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: k8s-keystone-auth
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-k8s-keystone-auth-config
    stringData:
      overrides: |
        null
  57: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: k8s-keystone-auth
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-k8s-keystone-auth
    spec:
      bootstrap: true
      chart:
        name: k8s-keystone-auth
        repo: https://catalyst-cloud.github.io/capi-plugin-helm-charts
        version: 1.4.0
      clusterName: RELEASE-NAME
      releaseName: k8s-keystone-auth
      targetNamespace: kube-system
      valuesSources:
        - secret:
            key: overrides
            name: RELEASE-NAME-k8s-keystone-auth-config
  58: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: reloader
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-reloader-cfg
    stringData:
      values: |
        reloader:
          watchGlobally: false
  59: |
    apiVersion: addons.stackhpc.com/v1alpha1
    kind: HelmRelease
    metadata:
      annotations:
        argocd.argoproj.io/sync-options: ControllerReferencesOnly=true
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: reloader
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: addons-0.1.0
      name: RELEASE-NAME-reloader
    spec:
      bootstrap: true
      chart:
        name: reloader
        repo: https://stakater.github.io/stakater-charts
        version: 2.2.7
      clusterName: RELEASE-NAME
      releaseName: reloader
      targetNamespace: openstack-system
      valuesSources:
        - secret:
            key: values
            name: RELEASE-NAME-reloader-cfg
  60: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: autoscaler
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-autoscaler
    spec:
      replicas: 1
      selector:
        matchLabels:
          capi.stackhpc.com/cluster: RELEASE-NAME
          capi.stackhpc.com/component: autoscaler
      template:
        metadata:
          labels:
            capi.stackhpc.com/cluster: RELEASE-NAME
            capi.stackhpc.com/component: autoscaler
        spec:
          containers:
            - args:
                - --cloud-provider=clusterapi
                - --kubeconfig=/mnt/kubeconfig/value
                - --clusterapi-cloud-config-authoritative
                - --node-group-auto-discovery=clusterapi:namespace=NAMESPACE,clusterName=RELEASE-NAME
                - --cordon-node-before-terminating=true
                - --expander=least-waste,random
                - --logtostderr=true
                - --skip-nodes-with-custom-controller-pods=false
                - --skip-nodes-with-local-storage=false
                - --skip-nodes-with-system-pods=true
                - --stderrthreshold=info
                - --v=4
              command:
                - /cluster-autoscaler
              image: registry.k8s.io/autoscaling/cluster-autoscaler:v1.30.4
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health-check
                  port: 8085
              name: autoscaler
              ports:
                - containerPort: 8085
              resources: {}
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                readOnlyRootFilesystem: true
              volumeMounts:
                - mountPath: /mnt/kubeconfig
                  name: kubeconfig
                  readOnly: true
          securityContext:
            runAsNonRoot: true
            runAsUser: 1001
          serviceAccountName: RELEASE-NAME-autoscaler
          volumes:
            - name: kubeconfig
              secret:
                secretName: RELEASE-NAME-kubeconfig
  61: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: autoscaler
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-autoscaler
    rules:
      - apiGroups:
          - cluster.x-k8s.io
        resources:
          - machinedeployments
          - machines
          - machinesets
          - machinepools
        verbs:
          - get
          - list
          - update
          - watch
      - apiGroups:
          - cluster.x-k8s.io
        resources:
          - machinedeployments/scale
        verbs:
          - get
          - patch
          - update
  62: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: autoscaler
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-autoscaler
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: RELEASE-NAME-autoscaler
    subjects:
      - kind: ServiceAccount
        name: RELEASE-NAME-autoscaler
        namespace: NAMESPACE
  63: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: autoscaler
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-autoscaler
  64: |
    apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
    kind: OpenStackCluster
    metadata:
      annotations:
        helm.sh/resource-policy: keep
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME
    spec:
      apiServerLoadBalancer:
        enabled: true
      apiServerPort: 6443
      controlPlaneOmitAvailabilityZone: true
      disableAPIServerFloatingIP: false
      identityRef:
        cloudName: openstack
        name: RELEASE-NAME-cloud-credentials
      managedSecurityGroups:
        allowAllInClusterTraffic: true
      managedSubnets:
        - cidr: 192.168.3.0/24
  65: |
    apiVersion: cluster.x-k8s.io/v1beta1
    kind: Cluster
    metadata:
      annotations: {}
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME
    spec:
      clusterNetwork:
        pods:
          cidrBlocks:
            - 172.16.0.0/13
        serviceDomain: cluster.local
        services:
          cidrBlocks:
            - 172.24.0.0/13
      controlPlaneRef:
        apiVersion: controlplane.cluster.x-k8s.io/v1beta1
        kind: KubeadmControlPlane
        name: RELEASE-NAME-control-plane
        namespace: NAMESPACE
      infrastructureRef:
        apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
        kind: OpenStackCluster
        name: RELEASE-NAME
        namespace: NAMESPACE
  66: |
    apiVersion: controlplane.cluster.x-k8s.io/v1beta1
    kind: KubeadmControlPlane
    metadata:
      annotations:
        helm.sh/resource-policy: keep
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: control-plane
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-control-plane
    spec:
      kubeadmConfigSpec:
        clusterConfiguration:
          apiServer:
            extraArgs:
              admission-control-config-file: /etc/kubernetes/admission/configuration.yaml
              v: "2"
            extraVolumes:
              - hostPath: /etc/kubernetes/admission
                mountPath: /etc/kubernetes/admission
                name: admission-configuration
                pathType: Directory
                readOnly: true
          controllerManager:
            extraArgs:
              bind-address: 0.0.0.0
              cloud-provider: external
          etcd:
            local:
              dataDir: /var/lib/etcd
              extraArgs:
                election-timeout: "5000"
                heartbeat-interval: "500"
                listen-metrics-urls: http://0.0.0.0:2381
                quota-backend-bytes: "4294967296"
          scheduler:
            extraArgs:
              bind-address: 0.0.0.0
        files:
          - contentFrom:
              secret:
                key: admission-configuration.yaml
                name: RELEASE-NAME-admission-configuration
            owner: root:root
            path: /etc/kubernetes/admission/configuration.yaml
            permissions: "0644"
          - content: |
              # This file is created by the capi-helm-chart to ensure that its parent directory exists
            owner: root:root
            path: /etc/containerd/conf.d/.keepdir
            permissions: "0644"
          - content: |
              # This file is created by the capi-helm-chart to ensure that its parent directory exists
            owner: root:root
            path: /etc/containerd/certs.d/.keepdir
            permissions: "0644"
          - content: |
              server = "https://registry-1.docker.io"
              [host."https://quay.io/v2/azimuth/docker.io"]
              capabilities = ["pull", "resolve"]
              skip_verify = false
              override_path = true
            owner: root:root
            path: /etc/containerd/certs.d/docker.io/hosts.toml
            permissions: "0644"
          - content: |
              server = "https://ghcr.io"
              [host."https://quay.io/v2/azimuth/ghcr.io"]
              capabilities = ["pull", "resolve"]
              skip_verify = false
              override_path = true
            owner: root:root
            path: /etc/containerd/certs.d/ghcr.io/hosts.toml
            permissions: "0644"
          - content: |
              server = "https://nvcr.io"
              [host."https://quay.io/v2/azimuth/nvcr.io"]
              capabilities = ["pull", "resolve"]
              skip_verify = false
              override_path = true
            owner: root:root
            path: /etc/containerd/certs.d/nvcr.io/hosts.toml
            permissions: "0644"
          - content: |
              server = "https://quay.io"
              [host."https://quay.io/v2/azimuth/quay.io"]
              capabilities = ["pull", "resolve"]
              skip_verify = false
              override_path = true
            owner: root:root
            path: /etc/containerd/certs.d/quay.io/hosts.toml
            permissions: "0644"
          - content: |
              server = "https://registry.k8s.io"
              [host."https://quay.io/v2/azimuth/registry.k8s.io"]
              capabilities = ["pull", "resolve"]
              skip_verify = false
              override_path = true
            owner: root:root
            path: /etc/containerd/certs.d/registry.k8s.io/hosts.toml
            permissions: "0644"
          - content: |
              ---
              apiVersion: kubeproxy.config.k8s.io/v1alpha1
              kind: KubeProxyConfiguration
              metricsBindAddress: 0.0.0.0:10249
            owner: root:root
            path: /run/kubeadm/kube-proxy-configuration.yaml
            permissions: "0644"
        initConfiguration:
          nodeRegistration:
            kubeletExtraArgs:
              cloud-provider: external
            name: '{{ local_hostname }}'
        joinConfiguration:
          nodeRegistration:
            kubeletExtraArgs:
              cloud-provider: external
            name: '{{ local_hostname }}'
        preKubeadmCommands:
          - |-
            /usr/bin/bash -s <<EOF
            grep -q '\[plugins."io.containerd.grpc.v1.cri".registry\]' /etc/containerd/config.toml && exit
            cat <<CONTENT >> /etc/containerd/config.toml
            [plugins."io.containerd.grpc.v1.cri".registry]
              config_path = "/etc/containerd/certs.d"
            CONTENT
            systemctl restart containerd
            EOF
          - cat /run/kubeadm/kube-proxy-configuration.yaml >> /run/kubeadm/kubeadm.yaml
      machineTemplate:
        infrastructureRef:
          apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
          kind: OpenStackMachineTemplate
          name: RELEASE-NAME-control-plane-e39a716c
          namespace: NAMESPACE
        metadata:
          labels:
            capi.stackhpc.com/cluster: RELEASE-NAME
            capi.stackhpc.com/component: control-plane
        nodeDeletionTimeout: 5m0s
        nodeDrainTimeout: 5m0s
        nodeVolumeDetachTimeout: 5m0s
      remediationStrategy:
        maxRetry: 3
        minHealthyPeriod: 1h
        retryPeriod: 20m
      replicas: 3
      rolloutStrategy:
        rollingUpdate:
          maxSurge: 1
        type: RollingUpdate
      version: v1.29.2
  67: |
    apiVersion: cluster.x-k8s.io/v1beta1
    kind: MachineHealthCheck
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: control-plane
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-control-plane
    spec:
      clusterName: RELEASE-NAME
      maxUnhealthy: 1
      nodeStartupTimeout: 30m0s
      selector:
        matchLabels:
          capi.stackhpc.com/cluster: RELEASE-NAME
          capi.stackhpc.com/component: control-plane
      unhealthyConditions:
        - status: Unknown
          timeout: 5m0s
          type: Ready
        - status: "False"
          timeout: 5m0s
          type: Ready
  68: |
    apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
    kind: OpenStackMachineTemplate
    metadata:
      annotations:
        capi.stackhpc.com/template-checksum: e39a716cdf1bf13ae070b43ebb6355fe88befcac4f72eedfcc3cfff10f0eabab
        helm.sh/resource-policy: keep
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: control-plane
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-control-plane-e39a716c
    spec:
      template:
        spec:
          flavor: vm.small
          identityRef:
            cloudName: openstack
            name: RELEASE-NAME-cloud-credentials
          image:
            filter:
              name: ubuntu-jammy-kube-v1.29.2
  69: |
    apiVersion: v1
    kind: Secret
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: admission-configuration
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-admission-configuration
    stringData:
      admission-configuration.yaml: |
        apiVersion: apiserver.config.k8s.io/v1
        kind: AdmissionConfiguration
        plugins: []
  70: |
    apiVersion: bootstrap.cluster.x-k8s.io/v1beta1
    kind: KubeadmConfigTemplate
    metadata:
      annotations:
        capi.stackhpc.com/template-checksum: d43bd1bb079c9f949f46b9f6bf89e1e1027a45756426801398f5ab1199a331c4
        helm.sh/resource-policy: keep
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: worker
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        capi.stackhpc.com/node-group: group-1
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-group-1-d43bd1bb
    spec:
      template:
        spec:
          files:
            - content: |
                # This file is created by the capi-helm-chart to ensure that its parent directory exists
              owner: root:root
              path: /etc/containerd/conf.d/.keepdir
              permissions: "0644"
            - content: |
                # This file is created by the capi-helm-chart to ensure that its parent directory exists
              owner: root:root
              path: /etc/containerd/certs.d/.keepdir
              permissions: "0644"
            - content: |
                server = "https://registry-1.docker.io"
                [host."https://quay.io/v2/azimuth/docker.io"]
                capabilities = ["pull", "resolve"]
                skip_verify = false
                override_path = true
              owner: root:root
              path: /etc/containerd/certs.d/docker.io/hosts.toml
              permissions: "0644"
            - content: |
                server = "https://ghcr.io"
                [host."https://quay.io/v2/azimuth/ghcr.io"]
                capabilities = ["pull", "resolve"]
                skip_verify = false
                override_path = true
              owner: root:root
              path: /etc/containerd/certs.d/ghcr.io/hosts.toml
              permissions: "0644"
            - content: |
                server = "https://nvcr.io"
                [host."https://quay.io/v2/azimuth/nvcr.io"]
                capabilities = ["pull", "resolve"]
                skip_verify = false
                override_path = true
              owner: root:root
              path: /etc/containerd/certs.d/nvcr.io/hosts.toml
              permissions: "0644"
            - content: |
                server = "https://quay.io"
                [host."https://quay.io/v2/azimuth/quay.io"]
                capabilities = ["pull", "resolve"]
                skip_verify = false
                override_path = true
              owner: root:root
              path: /etc/containerd/certs.d/quay.io/hosts.toml
              permissions: "0644"
            - content: |
                server = "https://registry.k8s.io"
                [host."https://quay.io/v2/azimuth/registry.k8s.io"]
                capabilities = ["pull", "resolve"]
                skip_verify = false
                override_path = true
              owner: root:root
              path: /etc/containerd/certs.d/registry.k8s.io/hosts.toml
              permissions: "0644"
          joinConfiguration:
            nodeRegistration:
              kubeletExtraArgs:
                cloud-provider: external
                node-labels: capi.stackhpc.com/node-group=group-1
              name: '{{ local_hostname }}'
          preKubeadmCommands:
            - |-
              /usr/bin/bash -s <<EOF
              grep -q '\[plugins."io.containerd.grpc.v1.cri".registry\]' /etc/containerd/config.toml && exit
              cat <<CONTENT >> /etc/containerd/config.toml
              [plugins."io.containerd.grpc.v1.cri".registry]
                config_path = "/etc/containerd/certs.d"
              CONTENT
              systemctl restart containerd
              EOF
  71: |
    apiVersion: bootstrap.cluster.x-k8s.io/v1beta1
    kind: KubeadmConfigTemplate
    metadata:
      annotations:
        capi.stackhpc.com/template-checksum: e1d1a382f8640c6551c40f3da6902e8d45a774e09fe30be4898ba00a70a63a67
        helm.sh/resource-policy: keep
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: worker
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        capi.stackhpc.com/node-group: group-2
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-group-2-e1d1a382
    spec:
      template:
        spec:
          files:
            - content: |
                # This file is created by the capi-helm-chart to ensure that its parent directory exists
              owner: root:root
              path: /etc/containerd/conf.d/.keepdir
              permissions: "0644"
            - content: |
                # This file is created by the capi-helm-chart to ensure that its parent directory exists
              owner: root:root
              path: /etc/containerd/certs.d/.keepdir
              permissions: "0644"
            - content: |
                server = "https://registry-1.docker.io"
                [host."https://quay.io/v2/azimuth/docker.io"]
                capabilities = ["pull", "resolve"]
                skip_verify = false
                override_path = true
              owner: root:root
              path: /etc/containerd/certs.d/docker.io/hosts.toml
              permissions: "0644"
            - content: |
                server = "https://ghcr.io"
                [host."https://quay.io/v2/azimuth/ghcr.io"]
                capabilities = ["pull", "resolve"]
                skip_verify = false
                override_path = true
              owner: root:root
              path: /etc/containerd/certs.d/ghcr.io/hosts.toml
              permissions: "0644"
            - content: |
                server = "https://nvcr.io"
                [host."https://quay.io/v2/azimuth/nvcr.io"]
                capabilities = ["pull", "resolve"]
                skip_verify = false
                override_path = true
              owner: root:root
              path: /etc/containerd/certs.d/nvcr.io/hosts.toml
              permissions: "0644"
            - content: |
                server = "https://quay.io"
                [host."https://quay.io/v2/azimuth/quay.io"]
                capabilities = ["pull", "resolve"]
                skip_verify = false
                override_path = true
              owner: root:root
              path: /etc/containerd/certs.d/quay.io/hosts.toml
              permissions: "0644"
            - content: |
                server = "https://registry.k8s.io"
                [host."https://quay.io/v2/azimuth/registry.k8s.io"]
                capabilities = ["pull", "resolve"]
                skip_verify = false
                override_path = true
              owner: root:root
              path: /etc/containerd/certs.d/registry.k8s.io/hosts.toml
              permissions: "0644"
          joinConfiguration:
            nodeRegistration:
              kubeletExtraArgs:
                cloud-provider: external
                node-labels: capi.stackhpc.com/node-group=group-2
              name: '{{ local_hostname }}'
          preKubeadmCommands:
            - |-
              /usr/bin/bash -s <<EOF
              grep -q '\[plugins."io.containerd.grpc.v1.cri".registry\]' /etc/containerd/config.toml && exit
              cat <<CONTENT >> /etc/containerd/config.toml
              [plugins."io.containerd.grpc.v1.cri".registry]
                config_path = "/etc/containerd/certs.d"
              CONTENT
              systemctl restart containerd
              EOF
  72: |
    apiVersion: cluster.x-k8s.io/v1beta1
    kind: MachineDeployment
    metadata:
      annotations: null
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: worker
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        capi.stackhpc.com/node-group: group-1
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-group-1
    spec:
      clusterName: RELEASE-NAME
      replicas: 1
      selector:
        matchLabels:
          capi.stackhpc.com/cluster: RELEASE-NAME
          capi.stackhpc.com/component: worker
          capi.stackhpc.com/node-group: group-1
          cluster.x-k8s.io/cluster-name: RELEASE-NAME
      strategy:
        rollingUpdate:
          deletePolicy: Random
          maxSurge: 0
          maxUnavailable: 1
        type: RollingUpdate
      template:
        metadata:
          labels:
            capi.stackhpc.com/cluster: RELEASE-NAME
            capi.stackhpc.com/component: worker
            capi.stackhpc.com/node-group: group-1
        spec:
          bootstrap:
            configRef:
              apiVersion: bootstrap.cluster.x-k8s.io/v1beta1
              kind: KubeadmConfigTemplate
              name: RELEASE-NAME-group-1-d43bd1bb
          clusterName: RELEASE-NAME
          infrastructureRef:
            apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
            kind: OpenStackMachineTemplate
            name: RELEASE-NAME-group-1-974c4cfd
          nodeDeletionTimeout: 5m0s
          nodeDrainTimeout: 5m0s
          nodeVolumeDetachTimeout: 5m0s
          version: v1.29.2
  73: |
    apiVersion: cluster.x-k8s.io/v1beta1
    kind: MachineDeployment
    metadata:
      annotations:
        cluster.x-k8s.io/cluster-api-autoscaler-node-group-max-size: "3"
        cluster.x-k8s.io/cluster-api-autoscaler-node-group-min-size: "1"
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: worker
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        capi.stackhpc.com/node-group: group-2
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-group-2
    spec:
      clusterName: RELEASE-NAME
      selector:
        matchLabels:
          capi.stackhpc.com/cluster: RELEASE-NAME
          capi.stackhpc.com/component: worker
          capi.stackhpc.com/node-group: group-2
          cluster.x-k8s.io/cluster-name: RELEASE-NAME
      strategy:
        rollingUpdate:
          deletePolicy: Random
          maxSurge: 0
          maxUnavailable: 1
        type: RollingUpdate
      template:
        metadata:
          labels:
            capi.stackhpc.com/cluster: RELEASE-NAME
            capi.stackhpc.com/component: worker
            capi.stackhpc.com/node-group: group-2
        spec:
          bootstrap:
            configRef:
              apiVersion: bootstrap.cluster.x-k8s.io/v1beta1
              kind: KubeadmConfigTemplate
              name: RELEASE-NAME-group-2-e1d1a382
          clusterName: RELEASE-NAME
          infrastructureRef:
            apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
            kind: OpenStackMachineTemplate
            name: RELEASE-NAME-group-2-26685203
          nodeDeletionTimeout: 5m0s
          nodeDrainTimeout: 5m0s
          nodeVolumeDetachTimeout: 5m0s
          version: v1.29.2
  74: |
    apiVersion: cluster.x-k8s.io/v1beta1
    kind: MachineHealthCheck
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: worker
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        capi.stackhpc.com/node-group: group-1
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-group-1
    spec:
      clusterName: RELEASE-NAME
      maxUnhealthy: 100%
      nodeStartupTimeout: 30m0s
      selector:
        matchLabels:
          capi.stackhpc.com/cluster: RELEASE-NAME
          capi.stackhpc.com/component: worker
          capi.stackhpc.com/node-group: group-1
      unhealthyConditions:
        - status: Unknown
          timeout: 5m0s
          type: Ready
        - status: "False"
          timeout: 5m0s
          type: Ready
  75: |
    apiVersion: cluster.x-k8s.io/v1beta1
    kind: MachineHealthCheck
    metadata:
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: worker
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        capi.stackhpc.com/node-group: group-2
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-group-2
    spec:
      clusterName: RELEASE-NAME
      maxUnhealthy: 100%
      nodeStartupTimeout: 30m0s
      selector:
        matchLabels:
          capi.stackhpc.com/cluster: RELEASE-NAME
          capi.stackhpc.com/component: worker
          capi.stackhpc.com/node-group: group-2
      unhealthyConditions:
        - status: Unknown
          timeout: 5m0s
          type: Ready
        - status: "False"
          timeout: 5m0s
          type: Ready
  76: |
    apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
    kind: OpenStackMachineTemplate
    metadata:
      annotations:
        capi.stackhpc.com/template-checksum: 974c4cfd217a218b8577c9b1362980b997329854003b0b8d126a018fb0429b61
        helm.sh/resource-policy: keep
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: worker
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        capi.stackhpc.com/node-group: group-1
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-group-1-974c4cfd
    spec:
      template:
        spec:
          flavor: vm.small
          identityRef:
            cloudName: openstack
            name: RELEASE-NAME-cloud-credentials
          image:
            filter:
              name: ubuntu-jammy-kube-v1.29.2
  77: |
    apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
    kind: OpenStackMachineTemplate
    metadata:
      annotations:
        capi.stackhpc.com/template-checksum: 2668520359b6b0cda12be8a8a3bfeafa8e9d6866f2f3122b08e9755eb30c0d1c
        helm.sh/resource-policy: keep
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: worker
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        capi.stackhpc.com/node-group: group-2
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-group-2-26685203
    spec:
      template:
        spec:
          flavor: vm.large
          identityRef:
            cloudName: openstack
            name: RELEASE-NAME-cloud-credentials
          image:
            filter:
              name: ubuntu-jammy-kube-v1.29.2
  78: |
    apiVersion: v1
    kind: Secret
    metadata:
      annotations:
        helm.sh/resource-policy: keep
      labels:
        capi.stackhpc.com/cluster: RELEASE-NAME
        capi.stackhpc.com/component: cloud-credentials
        capi.stackhpc.com/infrastructure-provider: openstack
        capi.stackhpc.com/managed-by: Helm
        helm.sh/chart: openstack-cluster-0.1.0
      name: RELEASE-NAME-cloud-credentials
    stringData:
      clouds.yaml: |
        clouds:
          openstack:
            auth:
              application_credential_id: <app cred id>
              application_credential_secret: <app cred secret>
              auth_url: https://my.cloud:5000
            auth_type: v3applicationcredential
            identity_api_version: 3
            interface: public
            region_name: RegionOne
